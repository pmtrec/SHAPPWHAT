(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{1038:(e,t,s)=>{Promise.resolve().then(s.bind(s,7104))},7104:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>tM});var a=s(5155),l=s(2115),r=s(9708),n=s(2085),i=s(2596),c=s(9688);function o(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,c.QP)((0,i.$)(t))}let d=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),m=l.forwardRef((e,t)=>{let{className:s,variant:l,size:n,asChild:i=!1,...c}=e,m=i?r.DX:"button";return(0,a.jsx)(m,{className:o(d({variant:l,size:n,className:s})),ref:t,...c})});m.displayName="Button";let u=l.forwardRef((e,t)=>{let{className:s,type:l,...r}=e;return(0,a.jsx)("input",{type:l,className:o("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:t,...r})});u.displayName="Input";let h=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)("div",{ref:t,className:o("rounded-lg border bg-card text-card-foreground shadow-sm",s),...l})});h.displayName="Card";let x=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)("div",{ref:t,className:o("flex flex-col space-y-1.5 p-6",s),...l})});x.displayName="CardHeader";let p=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)("div",{ref:t,className:o("text-2xl font-semibold leading-none tracking-tight",s),...l})});p.displayName="CardTitle";let f=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)("div",{ref:t,className:o("text-sm text-muted-foreground",s),...l})});f.displayName="CardDescription";let g=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)("div",{ref:t,className:o("p-6 pt-0",s),...l})});g.displayName="CardContent",l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)("div",{ref:t,className:o("flex items-center p-6 pt-0",s),...l})}).displayName="CardFooter";var v=s(1366),j=s(5525),N=s(6767),b=s(7550),y=s(6408),w=s(7358);class C{async sendVerificationSMS(e,t){try{if(!this.twilioAccountSid||!this.twilioAuthToken||!this.twilioPhoneNumber)return console.log("\uD83D\uDD27 Mode simulation - Code de v\xe9rification pour ".concat(e,": ").concat(t)),console.log("\uD83D\uDCA1 Pour envoyer de vrais SMS, configurez vos cl\xe9s Twilio dans les variables d'environnement"),!0;let s=await fetch("/api/send-sms",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({phoneNumber:e,message:"Votre code de v\xe9rification WhatsApp est : ".concat(t,". Ne le partagez avec personne.")})});if(!s.ok)throw Error("Erreur HTTP: ".concat(s.status));let a=await s.json();return console.log("✅ SMS envoy\xe9 avec succ\xe8s:",a.sid),!0}catch(e){return console.error("❌ Erreur lors de l'envoi du SMS:",e),console.log("\uD83D\uDD27 Basculement en mode simulation - Code: ".concat(t)),!0}}async sendSMS(e,t){try{if(!this.twilioAccountSid||!this.twilioAuthToken||!this.twilioPhoneNumber)return console.log("\uD83D\uDCF1 SMS simul\xe9 vers ".concat(e,": ").concat(t)),!0;return(await fetch("/api/send-sms",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({phoneNumber:e,message:t})})).ok}catch(e){return console.error("❌ Erreur SMS:",e),!1}}validatePhoneNumber(e){return/^\+[1-9]\d{1,14}$/.test(e)}formatPhoneNumber(e,t){let s=t.replace(/\D/g,"");return"".concat(e).concat(s)}constructor(){this.twilioAccountSid=w.env.NEXT_PUBLIC_TWILIO_ACCOUNT_SID||"",this.twilioAuthToken=w.env.TWILIO_AUTH_TOKEN||"",this.twilioPhoneNumber=w.env.NEXT_PUBLIC_TWILIO_PHONE_NUMBER||""}}let S=new C;var A=s(7358);function k(e){let{onLogin:t}=e,[s,r]=(0,l.useState)("phone"),[n,i]=(0,l.useState)(""),[c,o]=(0,l.useState)(""),[d,p]=(0,l.useState)("+221"),[f,w]=(0,l.useState)(""),[C,k]=(0,l.useState)(""),[D,I]=(0,l.useState)(!1),[P,T]=(0,l.useState)(0),E=(0,l.useRef)(null),R=(0,l.useCallback)(()=>Math.floor(1e5+9e5*Math.random()).toString(),[]),M=(0,l.useCallback)(()=>{E.current&&clearInterval(E.current),T(60),E.current=setInterval(()=>{T(e=>e<=1?(E.current&&(clearInterval(E.current),E.current=null),0):e-1)},1e3)},[]),z=(0,l.useCallback)(async()=>{I(!0);try{let e=R();k(e);let t=S.formatPhoneNumber(d,c);if(!S.validatePhoneNumber(t)){alert("Format de num\xe9ro de t\xe9l\xe9phone invalide"),I(!1);return}await S.sendVerificationSMS(t,e)?(r("verification"),M()):alert("Erreur lors de l'envoi du SMS. Veuillez r\xe9essayer.")}catch(e){console.error("Erreur:",e),alert("Erreur lors de l'envoi du SMS. Veuillez r\xe9essayer.")}finally{I(!1)}},[d,c,R,M]),F=(0,l.useCallback)(async e=>{if(e.preventDefault(),!n.trim()||!c.trim()){alert("Veuillez remplir tous les champs");return}if(c.length<8){alert("Num\xe9ro de t\xe9l\xe9phone invalide");return}await z()},[n,c,z]),_=(0,l.useCallback)(e=>{if(e.preventDefault(),f!==C){alert("Code de v\xe9rification incorrect");return}t({nom:n.trim(),telephone:S.formatPhoneNumber(d,c.trim()),description:"Salut ! J'utilise WhatsApp.",dateInscription:new Date().toLocaleDateString("fr-FR"),isOnline:!0})},[f,C,n,d,c,t]),L=(0,l.useCallback)(async()=>{P>0||await z()},[P,z]),O=(0,l.useCallback)(()=>{r("phone"),w(""),k(""),T(0),E.current&&(clearInterval(E.current),E.current=null)},[]);return l.useEffect(()=>()=>{E.current&&clearInterval(E.current)},[]),(0,a.jsx)("div",{className:"flex justify-center items-center min-h-screen p-4 bg-[#111b21]",children:(0,a.jsx)(y.P.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.5},className:"w-full max-w-md",children:(0,a.jsxs)(h,{className:"bg-[#202c33] border-[#2a3942] shadow-xl",children:[(0,a.jsxs)(x,{className:"text-center pb-6",children:[(0,a.jsx)(y.P.div,{initial:{y:-20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2,duration:.5},className:"flex justify-center mb-4",children:(0,a.jsx)("div",{className:"w-16 h-16 bg-[#00a884] rounded-full flex items-center justify-center animate-pulse-slow",children:(0,a.jsx)(v.A,{className:"w-8 h-8 text-white"})})}),(0,a.jsx)(y.P.h1,{initial:{y:-20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3,duration:.5},className:"text-2xl font-bold text-white",children:"WhatsApp"}),(0,a.jsx)(y.P.p,{initial:{y:-20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.4,duration:.5},className:"text-gray-400",children:"phone"===s?"Connectez-vous pour commencer":"V\xe9rification du num\xe9ro"})]}),(0,a.jsx)(g,{children:"phone"===s?(0,a.jsxs)(y.P.form,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.5,duration:.5},onSubmit:F,className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-2 mb-4 p-3 bg-[#2a3942] rounded-lg",children:[(0,a.jsx)(j.A,{className:"w-4 h-4 text-[#00a884]"}),(0,a.jsx)("span",{className:"text-sm text-gray-300",children:A.env.NEXT_PUBLIC_TWILIO_ACCOUNT_SID?"SMS r\xe9els activ\xe9s":"Mode simulation"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"userName",className:"block text-sm font-medium text-gray-300 mb-1",children:"Nom d'utilisateur"}),(0,a.jsx)(u,{id:"userName",type:"text",value:n,onChange:e=>i(e.target.value),placeholder:"Votre nom",className:"bg-[#2a3942] border-[#2a3942] text-white placeholder-gray-400 focus:border-[#00a884] focus:ring-[#00a884]",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"phoneNumber",className:"block text-sm font-medium text-gray-300 mb-1",children:"Num\xe9ro de t\xe9l\xe9phone"}),(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsxs)("select",{value:d,onChange:e=>p(e.target.value),className:"px-3 py-2 border border-[#2a3942] rounded-l-md focus:outline-none focus:ring-2 focus:ring-[#00a884] bg-[#2a3942] text-white",children:[(0,a.jsx)("option",{value:"+221",children:"\uD83C\uDDF8\uD83C\uDDF3 +221"}),(0,a.jsx)("option",{value:"+33",children:"\uD83C\uDDEB\uD83C\uDDF7 +33"}),(0,a.jsx)("option",{value:"+1",children:"\uD83C\uDDFA\uD83C\uDDF8 +1"}),(0,a.jsx)("option",{value:"+44",children:"\uD83C\uDDEC\uD83C\uDDE7 +44"}),(0,a.jsx)("option",{value:"+49",children:"\uD83C\uDDE9\uD83C\uDDEA +49"}),(0,a.jsx)("option",{value:"+34",children:"\uD83C\uDDEA\uD83C\uDDF8 +34"}),(0,a.jsx)("option",{value:"+39",children:"\uD83C\uDDEE\uD83C\uDDF9 +39"}),(0,a.jsx)("option",{value:"+212",children:"\uD83C\uDDF2\uD83C\uDDE6 +212"}),(0,a.jsx)("option",{value:"+213",children:"\uD83C\uDDE9\uD83C\uDDFF +213"}),(0,a.jsx)("option",{value:"+216",children:"\uD83C\uDDF9\uD83C\uDDF3 +216"})]}),(0,a.jsx)(u,{id:"phoneNumber",type:"tel",value:c,onChange:e=>o(e.target.value),placeholder:"Votre num\xe9ro",className:"rounded-l-none border-l-0 bg-[#2a3942] border-[#2a3942] text-white placeholder-gray-400 focus:border-[#00a884] focus:ring-[#00a884]",required:!0})]}),(0,a.jsxs)("p",{className:"text-xs text-gray-400 mt-1",children:[(0,a.jsx)(N.A,{className:"w-3 h-3 inline mr-1"}),"Format international requis (ex: 771234567)"]})]}),(0,a.jsx)(y.P.div,{whileHover:{scale:1.03},whileTap:{scale:.97},children:(0,a.jsx)(m,{type:"submit",className:"w-full gradient-button",disabled:D,children:D?(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Envoi du SMS..."]}):"Envoyer le code SMS"})}),!A.env.NEXT_PUBLIC_TWILIO_ACCOUNT_SID&&(0,a.jsx)("div",{className:"mt-4 p-3 bg-yellow-900/20 border border-yellow-600/30 rounded-lg",children:(0,a.jsxs)("p",{className:"text-xs text-yellow-400",children:["\uD83D\uDCA1 ",(0,a.jsx)("strong",{children:"Mode simulation :"})," Le code sera affich\xe9 dans la console. Pour recevoir de vrais SMS, configurez Twilio."]})})]}):(0,a.jsxs)(y.P.div,{initial:{x:20,opacity:0},animate:{x:0,opacity:1},transition:{duration:.5},className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center mb-4",children:[(0,a.jsx)(m,{variant:"ghost",size:"sm",onClick:O,className:"text-gray-300 hover:text-white hover:bg-[#2a3942] mr-2",children:(0,a.jsx)(b.A,{className:"w-4 h-4"})}),(0,a.jsx)("span",{className:"text-gray-300 text-sm",children:"Retour"})]}),(0,a.jsxs)("div",{className:"text-center mb-6",children:[(0,a.jsx)("p",{className:"text-gray-300 text-sm mb-2",children:A.env.NEXT_PUBLIC_TWILIO_ACCOUNT_SID?"Nous avons envoy\xe9 un code de v\xe9rification par SMS au":"Code de v\xe9rification g\xe9n\xe9r\xe9 pour"}),(0,a.jsxs)("p",{className:"text-white font-medium",children:[d," ",c]}),!A.env.NEXT_PUBLIC_TWILIO_ACCOUNT_SID&&(0,a.jsxs)("p",{className:"text-yellow-400 text-xs mt-2 p-2 bg-yellow-900/20 rounded",children:["\uD83D\uDCF1 Code de test : ",(0,a.jsx)("strong",{children:C})]})]}),(0,a.jsxs)("form",{onSubmit:_,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"verificationCode",className:"block text-sm font-medium text-gray-300 mb-1",children:"Code de v\xe9rification"}),(0,a.jsx)(u,{id:"verificationCode",type:"text",value:f,onChange:e=>w(e.target.value),placeholder:"Entrez le code \xe0 6 chiffres",maxLength:6,className:"bg-[#2a3942] border-[#2a3942] text-white placeholder-gray-400 focus:border-[#00a884] focus:ring-[#00a884] text-center text-lg tracking-widest",required:!0})]}),(0,a.jsx)(y.P.div,{whileHover:{scale:1.03},whileTap:{scale:.97},children:(0,a.jsx)(m,{type:"submit",className:"w-full gradient-button",children:"V\xe9rifier le code"})})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-gray-400 text-sm mb-2",children:"Vous n'avez pas re\xe7u le code ?"}),(0,a.jsx)(m,{variant:"ghost",size:"sm",onClick:L,disabled:P>0,className:"text-[#00a884] hover:text-[#008069] hover:bg-[#2a3942]",children:P>0?"Renvoyer dans ".concat(P,"s"):"Renvoyer le code"})]})]})})]})})})}var D=s(3861),I=s(9420),P=s(7580),T=s(4869),E=s(7576),R=s(9022),M=s(8564),z=s(381),F=s(4011);let _=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)(F.bL,{ref:t,className:o("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",s),...l})});_.displayName=F.bL.displayName;let L=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)(F._V,{ref:t,className:o("aspect-square h-full w-full",s),...l})});L.displayName=F._V.displayName;let O=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)(F.H4,{ref:t,className:o("flex h-full w-full items-center justify-center rounded-full bg-muted",s),...l})});function U(e){let{currentSection:t,onSectionChange:s,user:r,onLogout:n}=e,[i,c]=(0,l.useState)(39),o=[{id:"chats",icon:v.A,label:"Discussions",hasNotification:!0,notificationCount:i},{id:"status",icon:D.A,label:"Statuts",hasNotification:!1},{id:"calls",icon:I.A,label:"Appels",hasNotification:!1},{id:"groups",icon:P.A,label:"Groupes",hasNotification:!1},{id:"communities",icon:T.A,label:"Communaut\xe9s",hasNotification:!1},{id:"business",icon:E.A,label:"Business",hasNotification:!1},{id:"archived",icon:R.A,label:"Archiv\xe9es",hasNotification:!1},{id:"starred",icon:M.A,label:"Messages favoris",hasNotification:!1}];return(0,a.jsxs)(y.P.div,{initial:{width:0,opacity:0},animate:{width:"4rem",opacity:1},transition:{duration:.3},className:"w-16 bg-[#202c33] flex flex-col items-center py-4 space-y-4 border-r border-gray-700",children:[o.map(e=>(0,a.jsxs)("div",{className:"relative group",children:[(0,a.jsx)(y.P.div,{whileHover:{scale:1.1},whileTap:{scale:.95},className:"relative",children:(0,a.jsx)(m,{variant:"ghost",size:"sm",className:"w-12 h-12 p-0 rounded-lg transition-all duration-300 ".concat(t===e.id?"bg-[#00a884] text-white hover:bg-[#008069]":"text-gray-300 hover:bg-[#2a3942] hover:text-white"),onClick:()=>s(e.id),title:e.label,children:(0,a.jsx)(e.icon,{className:"w-6 h-6"})})}),e.hasNotification&&e.notificationCount>0&&(0,a.jsx)(y.P.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:500,damping:15},className:"absolute -top-1 -right-1 bg-[#25d366] text-white text-xs rounded-full w-5 h-5 flex items-center justify-center font-bold",children:e.notificationCount>99?"99+":e.notificationCount}),(0,a.jsx)("div",{className:"absolute left-16 top-1/2 transform -translate-y-1/2 bg-gray-800 text-white text-xs px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none whitespace-nowrap z-50",children:e.label})]},e.id)),(0,a.jsx)("div",{className:"flex-1"}),(0,a.jsxs)(y.P.div,{whileHover:{scale:1.1},whileTap:{scale:.95},className:"group relative",children:[(0,a.jsx)(m,{variant:"ghost",size:"sm",className:"w-12 h-12 p-0 rounded-lg text-gray-300 hover:bg-[#2a3942] hover:text-white transition-all duration-300",onClick:()=>s("settings"),title:"Param\xe8tres",children:(0,a.jsx)(z.A,{className:"w-6 h-6"})}),(0,a.jsx)("div",{className:"absolute left-16 top-1/2 transform -translate-y-1/2 bg-gray-800 text-white text-xs px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none whitespace-nowrap z-50",children:"Param\xe8tres"})]}),(0,a.jsxs)(y.P.div,{whileHover:{scale:1.1,rotate:5},whileTap:{scale:.95},className:"cursor-pointer group relative",onClick:n,title:"D\xe9connexion",children:[(0,a.jsx)(_,{className:"w-10 h-10 border-2 border-[#00a884]",children:(null==r?void 0:r.avatar)?(0,a.jsx)(L,{src:r.avatar||"/placeholder.svg",alt:(null==r?void 0:r.nom)||"User"}):(0,a.jsx)(O,{className:"text-white font-bold text-sm bg-gradient-to-br from-[#00a884] to-[#008069]",children:(e=>{var t,s;let a=e.split(" ");return(((null===(t=a[0])||void 0===t?void 0:t[0])||"")+((null===(s=a[1])||void 0===s?void 0:s[0])||"")).toUpperCase()})((null==r?void 0:r.nom)||"User")})}),(0,a.jsx)("div",{className:"absolute left-16 top-1/2 transform -translate-y-1/2 bg-gray-800 text-white text-xs px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none whitespace-nowrap z-50",children:"D\xe9connexion"})]})]})}O.displayName=F.H4.displayName;var W=s(4738),V=s(4616),H=s(7924),B=s(4020),q=s(2525),G=s(646),J=s(5339);function K(e){let{contacts:t,onAddContact:s,onBack:r}=e,[n,i]=(0,l.useState)(""),[c,o]=(0,l.useState)(""),[d,f]=(0,l.useState)(!1),[v,j]=(0,l.useState)(null),N=async e=>{if(e.preventDefault(),j(null),!n.trim()||!c.trim()){j({type:"error",text:"Veuillez remplir tous les champs"});return}if(t.some(e=>e.telephone===c)){j({type:"error",text:"Ce num\xe9ro existe d\xe9j\xe0 dans vos contacts."});return}f(!0);try{let e=new RegExp("^".concat(n,"(\\d+)?$")),a=t.filter(t=>e.test(t.nom)),l=n;if(a.length>0){let e=1;a.forEach(t=>{let s=t.nom.match(new RegExp("^".concat(n,"(\\d+)?$")));if(s&&s[1]){let t=Number.parseInt(s[1]);t>e&&(e=t)}}),l="".concat(n).concat(e+1)}let d={nom:l,telephone:c};await s(d),j({type:"success",text:"Contact ajout\xe9 comme ".concat(l)}),i(""),o(""),setTimeout(()=>{r()},2e3)}catch(e){console.error("Erreur lors de l'ajout:",e),j({type:"error",text:"Erreur lors de l'ajout du contact"})}finally{f(!1)}};return(0,a.jsxs)("div",{className:"p-4 bg-[#111b21] text-white h-full",children:[(0,a.jsxs)("div",{className:"flex items-center mb-6",children:[(0,a.jsx)(m,{variant:"ghost",size:"sm",onClick:r,className:"mr-2 text-gray-300 hover:text-white",children:(0,a.jsx)(b.A,{className:"w-4 h-4"})}),(0,a.jsx)("h2",{className:"text-lg font-semibold text-white",children:"Nouveau contact"})]}),(0,a.jsxs)(h,{className:"bg-[#202c33] border-gray-700",children:[(0,a.jsx)(x,{children:(0,a.jsx)(p,{className:"text-white",children:"Ajouter un contact"})}),(0,a.jsxs)(g,{children:[v&&(0,a.jsxs)("div",{className:"flex items-center p-3 rounded-lg mb-4 ".concat("success"===v.type?"bg-green-900/50 text-green-300":"bg-red-900/50 text-red-300"),children:["success"===v.type?(0,a.jsx)(G.A,{className:"w-4 h-4 mr-2"}):(0,a.jsx)(J.A,{className:"w-4 h-4 mr-2"}),(0,a.jsx)("span",{className:"text-sm",children:v.text})]}),(0,a.jsxs)("form",{onSubmit:N,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"contactName",className:"block text-sm font-medium mb-1 text-gray-300",children:"Nom"}),(0,a.jsx)(u,{id:"contactName",value:n,onChange:e=>i(e.target.value),placeholder:"Nom du contact",className:"bg-[#2a3942] border-[#2a3942] text-white placeholder-gray-400 focus:border-[#00a884] focus:ring-[#00a884]",required:!0,disabled:d})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"contactTel",className:"block text-sm font-medium mb-1 text-gray-300",children:"T\xe9l\xe9phone"}),(0,a.jsx)(u,{id:"contactTel",value:c,onChange:e=>o(e.target.value),placeholder:"Num\xe9ro de t\xe9l\xe9phone",className:"bg-[#2a3942] border-[#2a3942] text-white placeholder-gray-400 focus:border-[#00a884] focus:ring-[#00a884]",required:!0,disabled:d})]}),(0,a.jsx)(m,{type:"submit",className:"w-full bg-[#00a884] hover:bg-[#008069] text-white",disabled:d,children:d?(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Ajout en cours..."]}):"Ajouter le contact"})]})]})]})]})}var Z=s(760),X=s(704);let Y=X.bL,Q=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)(X.B8,{ref:t,className:o("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",s),...l})});Q.displayName=X.B8.displayName;let $=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)(X.l9,{ref:t,className:o("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",s),...l})});$.displayName=X.l9.displayName;let ee=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)(X.UC,{ref:t,className:o("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...l})});ee.displayName=X.UC.displayName;var et=s(8698),es=s(3052),ea=s(5196),el=s(9428);let er=et.bL,en=et.l9;et.YJ,et.ZL,et.Pb,et.z6,l.forwardRef((e,t)=>{let{className:s,inset:l,children:r,...n}=e;return(0,a.jsxs)(et.ZP,{ref:t,className:o("flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",l&&"pl-8",s),...n,children:[r,(0,a.jsx)(es.A,{className:"ml-auto"})]})}).displayName=et.ZP.displayName,l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)(et.G5,{ref:t,className:o("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...l})}).displayName=et.G5.displayName;let ei=l.forwardRef((e,t)=>{let{className:s,sideOffset:l=4,...r}=e;return(0,a.jsx)(et.ZL,{children:(0,a.jsx)(et.UC,{ref:t,sideOffset:l,className:o("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...r})})});ei.displayName=et.UC.displayName;let ec=l.forwardRef((e,t)=>{let{className:s,inset:l,...r}=e;return(0,a.jsx)(et.q7,{ref:t,className:o("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",l&&"pl-8",s),...r})});ec.displayName=et.q7.displayName,l.forwardRef((e,t)=>{let{className:s,children:l,checked:r,...n}=e;return(0,a.jsxs)(et.H_,{ref:t,className:o("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),checked:r,...n,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(et.VF,{children:(0,a.jsx)(ea.A,{className:"h-4 w-4"})})}),l]})}).displayName=et.H_.displayName,l.forwardRef((e,t)=>{let{className:s,children:l,...r}=e;return(0,a.jsxs)(et.hN,{ref:t,className:o("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...r,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(et.VF,{children:(0,a.jsx)(el.A,{className:"h-2 w-2 fill-current"})})}),l]})}).displayName=et.hN.displayName,l.forwardRef((e,t)=>{let{className:s,inset:l,...r}=e;return(0,a.jsx)(et.JU,{ref:t,className:o("px-2 py-1.5 text-sm font-semibold",l&&"pl-8",s),...r})}).displayName=et.JU.displayName,l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)(et.wv,{ref:t,className:o("-mx-1 my-1 h-px bg-muted",s),...l})}).displayName=et.wv.displayName;var eo=s(4520);let ed=eo.bL;eo.l9;let em=eo.ZL,eu=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)(eo.hJ,{className:o("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...l,ref:t})});eu.displayName=eo.hJ.displayName;let eh=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsxs)(em,{children:[(0,a.jsx)(eu,{}),(0,a.jsx)(eo.UC,{ref:t,className:o("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...l})]})});eh.displayName=eo.UC.displayName;let ex=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:o("flex flex-col space-y-2 text-center sm:text-left",t),...s})};ex.displayName="AlertDialogHeader";let ep=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:o("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...s})};ep.displayName="AlertDialogFooter";let ef=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)(eo.hE,{ref:t,className:o("text-lg font-semibold",s),...l})});ef.displayName=eo.hE.displayName;let eg=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)(eo.VY,{ref:t,className:o("text-sm text-muted-foreground",s),...l})});eg.displayName=eo.VY.displayName;let ev=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)(eo.rc,{ref:t,className:o(d(),s),...l})});ev.displayName=eo.rc.displayName;let ej=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)(eo.ZD,{ref:t,className:o(d({variant:"outline"}),"mt-2 sm:mt-0",s),...l})});function eN(e){let{user:t,contacts:s,conversations:r,groups:n,selectedContact:i,selectedGroup:c,onSelectContact:o,onSelectGroup:d,currentSection:h,onRefresh:x,onAddContact:p,onSyncContacts:f,onShowQRCode:g,onArchiveChat:j,onDeleteChat:b,archivedChats:w=[]}=e,[C,S]=(0,l.useState)(""),[A,k]=(0,l.useState)("Toutes"),[D,I]=(0,l.useState)(!1),[T,E]=(0,l.useState)(!1),[M,z]=(0,l.useState)(null),F=e=>{var t,s;let a=e.split(" ");return(((null===(t=a[0])||void 0===t?void 0:t[0])||"")+((null===(s=a[1])||void 0===s?void 0:s[0])||"")).toUpperCase()},U=e=>{let t=["#FF6B6B","#4ECDC4","#45B7D1","#96CEB4","#FFEAA7","#DDA0DD","#98D8C8","#F7DC6F"],s=e.charCodeAt(0)%t.length;return t[s]},G=e=>{let t=r[e];return t&&0!==t.length?t[t.length-1]:null},J=e=>{let t=new Date,s=new Date(e),a=Math.floor((t.getTime()-s.getTime())/864e5);return 0===a?s.toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"}):1===a?"Hier":a<7?s.toLocaleDateString("fr-FR",{weekday:"short"}):s.toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit"})},X=[...s.map(e=>({...e,type:"contact",targetId:e.id,conversationId:"conv_".concat(t.id,"_").concat(e.id)})),...n.map(e=>({...e,type:"group",targetId:"group_".concat(e.id),conversationId:"group_".concat(e.id)}))].filter(e=>{var t,s,a,l,r,n,i;let c=C.toLowerCase(),o=w.includes(e.targetId);return T?o&&((null===(t=e.nom)||void 0===t?void 0:t.toLowerCase().includes(c))||(null===(s=e.name)||void 0===s?void 0:s.toLowerCase().includes(c))||(null===(a=e.telephone)||void 0===a?void 0:a.includes(C))):!o&&("contact"===e.type?(null===(l=e.nom)||void 0===l?void 0:l.toLowerCase().includes(c))||(null===(r=e.name)||void 0===r?void 0:r.toLowerCase().includes(c))||(null===(n=e.telephone)||void 0===n?void 0:n.includes(C)):null===(i=e.name)||void 0===i?void 0:i.toLowerCase().includes(c))}),ee=async e=>{let t=await p(e);return I(!1),t},et=e=>{j(e.targetId,e.type)},es=e=>{z({open:!0,chat:e,type:e.type})},ea=w.length;return D?(0,a.jsx)("div",{className:"w-80 bg-[#111b21] border-r border-gray-700",children:(0,a.jsx)(K,{contacts:s,onAddContact:ee,onBack:()=>I(!1)})}):(0,a.jsxs)(y.P.div,{initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{duration:.3},className:"w-80 bg-[#111b21] border-r border-gray-700 flex flex-col",children:[(0,a.jsxs)("div",{className:"p-4 bg-[#202c33] border-b border-gray-700",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)(y.P.h2,{initial:{y:-10,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2},className:"text-xl font-semibold text-white",children:T?"Archiv\xe9es":"WhatsApp"}),(0,a.jsx)("div",{className:"flex items-center space-x-2",children:T?(0,a.jsx)(m,{variant:"ghost",size:"sm",onClick:()=>E(!1),className:"text-gray-300 hover:text-white hover:bg-[#2a3942]",children:"Retour"}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(y.P.div,{whileHover:{scale:1.1},whileTap:{scale:.95},children:(0,a.jsx)(m,{variant:"ghost",size:"sm",className:"text-gray-300 hover:text-white hover:bg-[#2a3942]",onClick:f,title:"Synchroniser les contacts",children:(0,a.jsx)(N.A,{className:"w-5 h-5"})})}),(0,a.jsx)(y.P.div,{whileHover:{scale:1.1},whileTap:{scale:.95},children:(0,a.jsx)(m,{variant:"ghost",size:"sm",className:"text-gray-300 hover:text-white hover:bg-[#2a3942]",onClick:g,title:"WhatsApp Web",children:(0,a.jsx)(W.A,{className:"w-5 h-5"})})}),(0,a.jsx)(y.P.div,{whileHover:{scale:1.1},whileTap:{scale:.95},children:(0,a.jsx)(m,{variant:"ghost",size:"sm",className:"text-gray-300 hover:text-white hover:bg-[#2a3942]",onClick:()=>I(!0),children:(0,a.jsx)(V.A,{className:"w-5 h-5"})})})]})})]}),(0,a.jsxs)(y.P.div,{initial:{y:10,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3},className:"relative mb-4",children:[(0,a.jsx)(H.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,a.jsx)(u,{placeholder:"Rechercher ou d\xe9marrer une discussion",value:C,onChange:e=>S(e.target.value),className:"pl-10 bg-[#202c33] border-[#2a3942] text-white placeholder-gray-400 focus:border-[#00a884] focus:ring-[#00a884]"})]}),!T&&(0,a.jsx)(y.P.div,{initial:{y:10,opacity:0},animate:{y:0,opacity:1},transition:{delay:.4},children:(0,a.jsx)(Y,{defaultValue:"Toutes",className:"w-full",children:(0,a.jsx)(Q,{className:"w-full bg-[#202c33] border-b border-gray-700",children:["Toutes","Non lues","Favoris","Groupes"].map(e=>(0,a.jsx)($,{value:e,className:"text-sm px-3 py-1 data-[state=active]:bg-[#00a884] data-[state=active]:text-white data-[state=active]:shadow-none text-gray-300 hover:text-white",onClick:()=>k(e),children:e},e))})})})]}),!T&&(0,a.jsx)(y.P.div,{initial:{y:10,opacity:0},animate:{y:0,opacity:1},transition:{delay:.5},className:"px-4 py-3 border-b border-gray-700 hover:bg-[#2a3942] cursor-pointer transition-all duration-300",onClick:()=>E(!0),children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-[#2a3942] rounded-full flex items-center justify-center mr-3",children:(0,a.jsx)(R.A,{className:"w-5 h-5 text-gray-300"})}),(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-white font-medium",children:"Archiv\xe9es"}),(0,a.jsx)("span",{className:"text-[#00a884] text-sm font-medium",children:ea})]})})]})}),(0,a.jsx)("div",{className:"flex-1 overflow-y-auto",children:0===X.length?(0,a.jsxs)(y.P.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.6},className:"text-center text-gray-400 py-8 px-4",children:[(0,a.jsx)(v.A,{className:"w-16 h-16 mx-auto mb-4 text-gray-600"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-300 mb-2",children:T?"Aucune discussion archiv\xe9e":"Aucune discussion"}),(0,a.jsx)("p",{className:"text-sm mb-4",children:T?"Les discussions archiv\xe9es appara\xeetront ici":"Commencez \xe0 discuter avec vos contacts"}),!T&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)(m,{onClick:f,className:"w-full bg-[#00a884] hover:bg-[#008069] text-sm",children:[(0,a.jsx)(N.A,{className:"w-4 h-4 mr-2"}),"Synchroniser les contacts"]}),(0,a.jsxs)(m,{onClick:()=>I(!0),variant:"ghost",className:"w-full text-gray-300 hover:text-white text-sm",children:[(0,a.jsx)(V.A,{className:"w-4 h-4 mr-2"}),"Ajouter un contact"]})]})]}):(0,a.jsx)(Z.N,{children:X.map((e,t)=>{var s;let l=G(e.conversationId),r="contact"===e.type&&(null==i?void 0:i.id)===e.id||"group"===e.type&&(null==c?void 0:c.id)===e.id,n=e.name||e.nom,u=e.isOnline||!1;return(0,a.jsxs)(y.P.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},exit:{y:-20,opacity:0},transition:{delay:.05*t+.6,duration:.3},className:"group flex items-center p-3 cursor-pointer hover-effect ".concat(r?"bg-[#2a3942]":""),children:[(0,a.jsxs)("div",{className:"flex items-center flex-1",onClick:()=>"contact"===e.type?o(e):d(e),children:[(0,a.jsx)("div",{className:"relative ".concat(u?"status-indicator":"status-indicator offline"),children:(0,a.jsx)(_,{className:"w-12 h-12 mr-3",children:e.avatar?(0,a.jsx)(L,{src:e.avatar||"/placeholder.svg",alt:n}):(0,a.jsx)(O,{className:"text-white font-bold",style:{backgroundColor:"group"===e.type?"#00a884":U(n)},children:"group"===e.type?(0,a.jsx)(P.A,{className:"w-6 h-6"}):F(n)})})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h3",{className:"font-medium text-white truncate",children:n}),l&&(0,a.jsx)("span",{className:"text-xs text-gray-400",children:J(l.timestamp)})]}),(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsx)("p",{className:"text-sm text-gray-400 truncate",children:l?"text"===l.type?l.contenu:"image"===l.type?"\uD83D\uDCF7 Photo":"file"===l.type?"\uD83D\uDCCE Fichier":"audio"===l.type?"\uD83C\uDFB5 Audio":l.contenu:"group"===e.type?"".concat((null===(s=e.members)||void 0===s?void 0:s.length)||0," membres"):"Aucun message"})})]})]}),(0,a.jsx)("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity",children:(0,a.jsxs)(er,{children:[(0,a.jsx)(en,{asChild:!0,children:(0,a.jsx)(m,{variant:"ghost",size:"sm",className:"text-gray-400 hover:text-white w-8 h-8 p-0",children:(0,a.jsx)(B.A,{className:"w-4 h-4"})})}),(0,a.jsxs)(ei,{align:"end",className:"bg-[#2a3942] border-gray-700",children:[(0,a.jsxs)(ec,{onClick:()=>et(e),className:"text-gray-300 hover:text-white hover:bg-[#3b4a54]",children:[(0,a.jsx)(R.A,{className:"w-4 h-4 mr-2"}),T?"D\xe9sarchiver":"Archiver"]}),(0,a.jsxs)(ec,{onClick:()=>es(e),className:"text-red-400 hover:text-red-300 hover:bg-[#3b4a54]",children:[(0,a.jsx)(q.A,{className:"w-4 h-4 mr-2"}),"Supprimer"]})]})]})})]},e.targetId)})})}),(0,a.jsx)(ed,{open:(null==M?void 0:M.open)||!1,onOpenChange:e=>!e&&z(null),children:(0,a.jsxs)(eh,{className:"bg-[#2a3942] border-gray-700",children:[(0,a.jsxs)(ex,{children:[(0,a.jsxs)(ef,{className:"text-white",children:["Supprimer ",(null==M?void 0:M.type)==="group"?"le groupe":"la discussion"," ?"]}),(0,a.jsxs)(eg,{className:"text-gray-400",children:["Cette action supprimera d\xe9finitivement ",(null==M?void 0:M.type)==="group"?"le groupe":"la discussion"," et tous ses messages. Cette action ne peut pas \xeatre annul\xe9e."]})]}),(0,a.jsxs)(ep,{children:[(0,a.jsx)(ej,{className:"bg-gray-600 text-white hover:bg-gray-700",children:"Annuler"}),(0,a.jsx)(ev,{onClick:()=>{M&&(b(M.chat.targetId,M.type),z(null))},className:"bg-red-600 text-white hover:bg-red-700",children:"Supprimer"})]})]})})]})}ej.displayName=eo.ZD.displayName;var eb=s(7213),ey=s(7434),ew=s(4355),eC=s(6517),eS=s(4449),eA=s(9803),ek=s(9424),eD=s(2486),eI=s(9588),eP=s(1976),eT=s(333),eE=s(361),eR=s(9468),eM=s(3461),ez=s(437),eF=s(1788),e_=s(2178),eL=s(5690),eO=s(4032),eU=s(5);function eW(e){let{message:t,onReply:s,onForward:r,onStar:n,onReact:i,onEdit:c,onDelete:o,isGroup:d=!1}=e,u="moi"===t.expediteur,[h,x]=(0,l.useState)(!1),[p,f]=(0,l.useState)(!1),g=[{emoji:"❤️",name:"heart",icon:eP.A},{emoji:"\uD83D\uDC4D",name:"like",icon:eT.A},{emoji:"\uD83D\uDE02",name:"laugh",icon:eE.A},{emoji:"\uD83D\uDE2E",name:"wow",icon:eT.A},{emoji:"\uD83D\uDE22",name:"sad",icon:eR.A},{emoji:"\uD83D\uDE21",name:"angry",icon:eM.A}],v=e=>{if(0===e)return"0 Bytes";let t=Math.floor(Math.log(e)/Math.log(1024));return Number.parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]},j=e=>{let t=Math.floor(e/60);return"".concat(t,":").concat((e%60).toString().padStart(2,"0"))},N=()=>{x(!h)},b=e=>{i&&i(t,e),f(!1)};return(0,a.jsxs)("div",{className:"flex ".concat(u?"justify-end":"justify-start"," group"),children:[(0,a.jsxs)(y.P.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.2},className:"max-w-xs lg:max-w-md px-4 py-2 rounded-lg relative ".concat(u?"message-bubble-out":"message-bubble-in"),onDoubleClick:()=>f(!0),children:[t.replyTo&&(0,a.jsxs)("div",{className:"mb-2 p-2 bg-black bg-opacity-20 rounded border-l-2 border-[#00a884]",children:[(0,a.jsx)("p",{className:"text-xs text-gray-300",children:"R\xe9ponse \xe0"}),(0,a.jsx)("p",{className:"text-sm text-gray-200 truncate",children:t.replyTo.content})]}),d&&!u&&(0,a.jsx)("p",{className:"text-xs text-[#00a884] font-medium mb-1",children:t.expediteur}),(()=>{var e,s,l,r;switch(t.type){case"text":return(0,a.jsxs)("div",{className:"break-words",children:[t.contenu,t.edited&&(0,a.jsx)("span",{className:"text-xs text-gray-400 ml-2",children:"(modifi\xe9)"})]});case"image":return(0,a.jsxs)(y.P.div,{whileHover:{scale:1.02},className:"max-w-sm",children:[(0,a.jsx)("img",{src:t.contenu||"/placeholder.svg",alt:"Image",className:"max-w-full rounded-lg cursor-pointer",onClick:()=>window.open(t.contenu,"_blank")}),t.viewOnce&&(0,a.jsx)("div",{className:"text-xs text-gray-400 mt-1",children:"\uD83D\uDCF7 Vue unique"})]});case"gif":return(0,a.jsxs)(y.P.div,{whileHover:{scale:1.02},className:"max-w-sm",children:[(0,a.jsx)("img",{src:t.contenu||"/placeholder.svg",alt:"GIF",className:"max-w-full rounded-lg cursor-pointer"}),(0,a.jsx)("div",{className:"text-xs text-gray-400 mt-1",children:"GIF"})]});case"sticker":return(0,a.jsx)(y.P.div,{whileHover:{scale:1.1},className:"w-32 h-32",children:(0,a.jsx)("img",{src:t.contenu||"/placeholder.svg",alt:"Sticker",className:"w-full h-full object-contain"})});case"file":return(0,a.jsxs)(y.P.div,{whileHover:{scale:1.02},className:"flex items-center gap-3 p-3 bg-[#2a3942] rounded-lg cursor-pointer min-w-[200px]",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-[#00a884] rounded-full flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-white text-xs font-bold",children:(null===(s=t.nom)||void 0===s?void 0:null===(e=s.split(".").pop())||void 0===e?void 0:e.toUpperCase())||"FILE"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"text-white font-medium truncate",children:t.nom}),t.taille&&(0,a.jsx)("p",{className:"text-gray-400 text-xs",children:v(t.taille)})]}),(0,a.jsx)(m,{variant:"ghost",size:"sm",className:"text-gray-300 hover:text-white",children:(0,a.jsx)(eF.A,{className:"w-4 h-4"})})]});case"audio":return(0,a.jsxs)(y.P.div,{whileHover:{scale:1.02},className:"flex items-center gap-3 p-3 bg-[#2a3942] rounded-lg min-w-[200px]",children:[(0,a.jsx)(m,{variant:"ghost",size:"sm",onClick:N,className:"w-10 h-10 rounded-full bg-[#00a884] hover:bg-[#008069] text-white p-0",children:h?(0,a.jsx)(e_.A,{className:"w-4 h-4"}):(0,a.jsx)(eL.A,{className:"w-4 h-4"})}),(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"flex-1 h-1 bg-gray-600 rounded-full",children:(0,a.jsx)("div",{className:"h-full bg-[#00a884] rounded-full",style:{width:"30%"}})}),(0,a.jsx)("span",{className:"text-gray-400 text-xs",children:t.duree?j(t.duree):"0:00"})]})})]});case"location":return(0,a.jsxs)(y.P.div,{whileHover:{scale:1.02},className:"p-3 bg-[#2a3942] rounded-lg cursor-pointer min-w-[200px]",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-[#00a884] rounded-full flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-white text-xs",children:"\uD83D\uDCCD"})}),(0,a.jsx)("span",{className:"text-white font-medium",children:"Position partag\xe9e"})]}),(0,a.jsxs)("div",{className:"text-gray-400 text-sm",children:["Lat: ",null===(l=t.contenu.latitude)||void 0===l?void 0:l.toFixed(6),", Lng: ",null===(r=t.contenu.longitude)||void 0===r?void 0:r.toFixed(6)]})]});case"contact":return(0,a.jsx)(y.P.div,{whileHover:{scale:1.02},className:"p-3 bg-[#2a3942] rounded-lg cursor-pointer min-w-[200px]",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-[#00a884] rounded-full flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-white text-sm",children:"\uD83D\uDC64"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-white font-medium",children:t.contenu.name||t.contenu.nom}),(0,a.jsx)("p",{className:"text-gray-400 text-sm",children:t.contenu.telephone})]})]})});default:return(0,a.jsx)("div",{className:"break-words",children:t.contenu})}})(),t.reactions&&t.reactions.length>0&&(0,a.jsx)("div",{className:"flex flex-wrap gap-1 mt-2",children:t.reactions.map((e,t)=>(0,a.jsxs)("span",{className:"text-xs bg-black bg-opacity-20 px-1 rounded",children:[e.emoji," ",e.count]},t))}),(0,a.jsxs)("div",{className:"flex items-center justify-between gap-2 mt-1 text-xs ".concat(u?"text-green-200":"text-gray-400"),children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("span",{children:t.heure}),t.starred&&(0,a.jsx)(M.A,{className:"w-3 h-3 fill-current"}),t.disappearAt&&(0,a.jsx)("span",{className:"text-xs",children:"⏰"})]}),u&&t.statut&&(e=>{switch(e){case"sent":return(0,a.jsx)(ea.A,{className:"w-3 h-3 text-gray-400"});case"delivered":return(0,a.jsx)(ez.A,{className:"w-3 h-3 text-gray-400"});case"read":return(0,a.jsx)(ez.A,{className:"w-3 h-3 text-blue-400"});default:return null}})(t.statut)]}),(0,a.jsx)("div",{className:"absolute -top-8 right-0 opacity-0 group-hover:opacity-100 transition-opacity",children:(0,a.jsxs)("div",{className:"flex items-center gap-1 bg-[#233138] rounded-lg p-1",children:[(0,a.jsx)(m,{variant:"ghost",size:"sm",className:"w-6 h-6 p-0 text-gray-300 hover:text-white",onClick:()=>f(!0),children:"❤️"}),s&&(0,a.jsx)(m,{variant:"ghost",size:"sm",className:"w-6 h-6 p-0 text-gray-300 hover:text-white",onClick:()=>s(t),children:(0,a.jsx)(eO.A,{className:"w-3 h-3"})}),(0,a.jsxs)(er,{children:[(0,a.jsx)(en,{asChild:!0,children:(0,a.jsx)(m,{variant:"ghost",size:"sm",className:"w-6 h-6 p-0 text-gray-300 hover:text-white",children:(0,a.jsx)(B.A,{className:"w-3 h-3"})})}),(0,a.jsxs)(ei,{className:"bg-[#233138] border-gray-700",children:[r&&(0,a.jsxs)(ec,{onClick:()=>r(t),className:"text-gray-300 hover:text-white",children:[(0,a.jsx)(eU.A,{className:"w-4 h-4 mr-2"}),"Transf\xe9rer"]}),n&&(0,a.jsxs)(ec,{onClick:()=>n(t),className:"text-gray-300 hover:text-white",children:[(0,a.jsx)(M.A,{className:"w-4 h-4 mr-2"}),t.starred?"Retirer des favoris":"Ajouter aux favoris"]}),u&&c&&"text"===t.type&&(0,a.jsx)(ec,{onClick:()=>c(t),className:"text-gray-300 hover:text-white",children:"Modifier"}),o&&(0,a.jsx)(ec,{onClick:()=>o(t),className:"text-red-400 hover:text-red-300",children:"Supprimer"})]})]})]})})]}),(0,a.jsx)(Z.N,{children:p&&(0,a.jsx)(y.P.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:()=>f(!1),children:(0,a.jsx)(y.P.div,{className:"bg-[#233138] rounded-lg p-4 flex gap-2",onClick:e=>e.stopPropagation(),children:g.map(e=>(0,a.jsx)(m,{variant:"ghost",size:"sm",className:"w-12 h-12 text-2xl hover:bg-[#2a3942]",onClick:()=>b(e.emoji),children:e.emoji},e.name))})})})]})}var eV=s(8979),eH=s(4416);function eB(e){let{onSendAudio:t,onCancel:s}=e,[r,n]=(0,l.useState)(!1),[i,c]=(0,l.useState)(!1),[o,d]=(0,l.useState)(!1),[u,h]=(0,l.useState)(0),[x,p]=(0,l.useState)(null),[f,g]=(0,l.useState)(null),v=(0,l.useRef)(null),j=(0,l.useRef)(null),N=(0,l.useRef)([]),b=(0,l.useRef)(null),w=(0,l.useRef)(null);(0,l.useEffect)(()=>()=>{C()},[]);let C=()=>{b.current&&clearInterval(b.current),w.current&&w.current.getTracks().forEach(e=>e.stop()),f&&URL.revokeObjectURL(f)},S=async()=>{try{let e=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,sampleRate:44100}});w.current=e,N.current=[];let t=new MediaRecorder(e,{mimeType:"audio/webm;codecs=opus"});v.current=t,t.ondataavailable=e=>{e.data.size>0&&N.current.push(e.data)},t.onstop=()=>{let e=new Blob(N.current,{type:"audio/webm;codecs=opus"});p(e);let t=URL.createObjectURL(e);g(t)},t.start(100),n(!0),c(!1),b.current=setInterval(()=>{h(e=>e+1)},1e3)}catch(e){console.error("Erreur lors de l'acc\xe8s au microphone:",e),alert("Impossible d'acc\xe9der au microphone. Veuillez v\xe9rifier les permissions.")}},A=e=>{let t=Math.floor(e/60);return"".concat(t,":").concat((e%60).toString().padStart(2,"0"))};return(0,a.jsxs)(y.P.div,{initial:{y:100,opacity:0},animate:{y:0,opacity:1},exit:{y:100,opacity:0},className:"bg-[#202c33] border-t border-gray-700 p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[!x&&(0,a.jsx)("div",{className:"flex items-center space-x-2",children:r?(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(m,{onClick:()=>{v.current&&r&&(v.current.stop(),n(!1),c(!1),b.current&&clearInterval(b.current),w.current&&w.current.getTracks().forEach(e=>e.stop()))},className:"bg-red-600 hover:bg-red-700 rounded-full w-12 h-12 p-0",children:(0,a.jsx)(eV.A,{className:"w-6 h-6"})}),i?(0,a.jsx)(m,{onClick:()=>{v.current&&i&&(v.current.resume(),c(!1),b.current=setInterval(()=>{h(e=>e+1)},1e3))},variant:"ghost",className:"text-gray-300 hover:text-white",children:(0,a.jsx)(eL.A,{className:"w-5 h-5"})}):(0,a.jsx)(m,{onClick:()=>{v.current&&r&&(v.current.pause(),c(!0),b.current&&clearInterval(b.current))},variant:"ghost",className:"text-gray-300 hover:text-white",children:(0,a.jsx)(e_.A,{className:"w-5 h-5"})})]}):(0,a.jsx)(m,{onClick:S,className:"bg-red-600 hover:bg-red-700 rounded-full w-12 h-12 p-0",children:(0,a.jsx)(eI.A,{className:"w-6 h-6"})})}),x&&(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(m,{onClick:o?()=>{j.current&&(j.current.pause(),d(!1))}:()=>{f&&j.current&&(j.current.play(),d(!0))},className:"bg-[#00a884] hover:bg-[#008069] rounded-full w-12 h-12 p-0",children:o?(0,a.jsx)(e_.A,{className:"w-6 h-6"}):(0,a.jsx)(eL.A,{className:"w-6 h-6"})}),(0,a.jsx)(m,{onClick:()=>{p(null),f&&(URL.revokeObjectURL(f),g(null)),h(0),d(!1)},variant:"ghost",className:"text-red-400 hover:text-red-300",children:(0,a.jsx)(q.A,{className:"w-5 h-5"})})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[r&&(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-3 h-3 bg-red-500 rounded-full animate-pulse"}),(0,a.jsx)("span",{className:"text-red-400 font-mono",children:A(u)}),i&&(0,a.jsx)("span",{className:"text-yellow-400 text-sm",children:"PAUSE"})]}),x&&!r&&(0,a.jsx)("span",{className:"text-gray-300 font-mono",children:A(u)})]}),r&&!i&&(0,a.jsx)("div",{className:"flex items-center space-x-1",children:[...Array(20)].map((e,t)=>(0,a.jsx)(y.P.div,{className:"w-1 bg-[#00a884] rounded-full",animate:{height:[4,20*Math.random()+4,4]},transition:{duration:.5,repeat:Number.POSITIVE_INFINITY,delay:.1*t}},t))})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(m,{onClick:()=>{C(),s()},variant:"ghost",className:"text-gray-300 hover:text-white",children:(0,a.jsx)(eH.A,{className:"w-5 h-5"})}),x&&(0,a.jsx)(m,{onClick:()=>{x&&(t(x,u),C())},className:"bg-[#00a884] hover:bg-[#008069]",children:(0,a.jsx)(eD.A,{className:"w-5 h-5"})})]})]}),f&&(0,a.jsx)("audio",{ref:j,src:f,onEnded:()=>d(!1),onPlay:()=>d(!0),onPause:()=>d(!1)})]})}var eq=s(9613);let eG=eq.Kq,eJ=eq.bL,eK=eq.l9,eZ=l.forwardRef((e,t)=>{let{className:s,sideOffset:l=4,...r}=e;return(0,a.jsx)(eq.UC,{ref:t,sideOffset:l,className:o("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...r})});function eX(e){var t,s;let{selectedContact:r,selectedGroup:n,conversations:i,onSendMessage:c,onBack:o,user:d,onCall:h,isConnected:x=!1}=e,[p,f]=(0,l.useState)(""),[g,v]=(0,l.useState)(!1),[j,N]=(0,l.useState)(!1),w=(0,l.useRef)(null),C=(0,l.useRef)(null),S=(0,l.useRef)(null),A=r||n,k=r?"conv_".concat(d.id,"_").concat(r.id):n?"group_".concat(n.id):null,D=()=>{var e;null===(e=w.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})};(0,l.useEffect)(()=>{D()},[i,k]);let P=()=>{p.trim()&&A&&(c({contenu:p.trim(),type:"text"}),f(""))},T=(e,t)=>{let s=new FileReader;s.onload=s=>{var a;c({contenu:null===(a=s.target)||void 0===a?void 0:a.result,type:t,nom:e.name,taille:e.size})},s.readAsDataURL(e)},E=e=>{r&&h&&h(r.id,e)},R=[{icon:eb.A,label:"Photo",color:"text-purple-500",onClick:()=>{var e;return null===(e=S.current)||void 0===e?void 0:e.click()}},{icon:ey.A,label:"Document",color:"text-blue-500",onClick:()=>{var e;return null===(e=C.current)||void 0===e?void 0:e.click()}},{icon:ew.A,label:"Cam\xe9ra",color:"text-pink-500",onClick:()=>console.log("Ouvrir cam\xe9ra")}];if(!A)return(0,a.jsx)(y.P.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},className:"flex-1 bg-[#0b141a] flex items-center justify-center chat-background",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(y.P.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:.2},transition:{delay:.3,duration:.5},className:"w-64 h-64 mx-auto mb-8",children:(0,a.jsxs)("svg",{viewBox:"0 0 303 172",className:"w-full h-full",children:[(0,a.jsx)("defs",{children:(0,a.jsxs)("linearGradient",{id:"a",x1:"50%",x2:"50%",y1:"100%",y2:"0%",children:[(0,a.jsx)("stop",{offset:"0%",stopColor:"#25d366",stopOpacity:".1"}),(0,a.jsx)("stop",{offset:"100%",stopColor:"#25d366",stopOpacity:".05"})]})}),(0,a.jsxs)("g",{fill:"none",fillRule:"evenodd",children:[(0,a.jsx)("path",{fill:"url(#a)",d:"M229.38 158.13H0V0h303v84.37c0 28.35-23.03 51.38-51.38 51.38H229.38z"}),(0,a.jsx)("path",{fill:"#404040",d:"M229.38 143.13H15V15h273v69.37c0 20.07-16.31 36.38-36.38 36.38H229.38z"})]})]})}),(0,a.jsx)(y.P.h3,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.5},className:"text-2xl font-light text-gray-300 mb-2",children:"WhatsApp Web"}),(0,a.jsx)(y.P.p,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.7},className:"text-gray-400 max-w-md mx-auto",children:"S\xe9lectionnez un contact ou un groupe pour commencer \xe0 discuter."})]})});let M=k&&i[k]?i[k]:[],z=A.name||A.nom;return(0,a.jsxs)(y.P.div,{initial:{x:20,opacity:0},animate:{x:0,opacity:1},transition:{duration:.3},className:"flex-1 flex flex-col bg-[#0b141a]",children:[(0,a.jsxs)("div",{className:"bg-[#202c33] border-b border-gray-700 p-4 flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(y.P.div,{whileHover:{scale:1.1},whileTap:{scale:.95},children:(0,a.jsx)(m,{variant:"ghost",size:"sm",onClick:o,className:"mr-2 md:hidden text-gray-300 hover:bg-[#2a3942]",children:(0,a.jsx)(b.A,{className:"w-4 h-4"})})}),(0,a.jsx)(y.P.div,{whileHover:{scale:1.05},className:"relative ".concat((null==r?void 0:r.isOnline)?"status-indicator":"status-indicator offline"),children:(0,a.jsx)(_,{className:"w-10 h-10 mr-3",children:A.avatar?(0,a.jsx)(L,{src:A.avatar||"/placeholder.svg",alt:z}):(0,a.jsx)(O,{className:"text-white font-bold",style:{backgroundColor:n?"#00a884":(e=>{let t=["#FF6B6B","#4ECDC4","#45B7D1","#96CEB4","#FFEAA7","#DDA0DD","#98D8C8","#F7DC6F"],s=e.charCodeAt(0)%t.length;return t[s]})(z)},children:(e=>{var t,s;let a=e.split(" ");return(((null===(t=a[0])||void 0===t?void 0:t[0])||"")+((null===(s=a[1])||void 0===s?void 0:s[0])||"")).toUpperCase()})(z)})})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-medium text-white",children:z}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("p",{className:"text-sm text-gray-400",children:n?"".concat((null===(t=n.membres)||void 0===t?void 0:t.length)||(null===(s=n.members)||void 0===s?void 0:s.length)||0," membres"):(null==r?void 0:r.isOnline)?"en ligne":"hors ligne"}),(0,a.jsx)("div",{className:"flex items-center",children:x?(0,a.jsx)(eC.A,{className:"w-3 h-3 text-green-500"}):(0,a.jsx)(eS.A,{className:"w-3 h-3 text-red-500"})})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(eG,{children:(0,a.jsxs)(eJ,{children:[(0,a.jsx)(eK,{asChild:!0,children:(0,a.jsx)(y.P.div,{whileHover:{scale:1.1},whileTap:{scale:.95},children:(0,a.jsx)(m,{variant:"ghost",size:"sm",className:"text-gray-300 hover:text-white hover:bg-[#2a3942]",onClick:()=>E("voice"),disabled:!r||!x,children:(0,a.jsx)(I.A,{className:"w-5 h-5"})})})}),(0,a.jsx)(eZ,{children:(0,a.jsx)("p",{children:"Appel vocal"})})]})}),(0,a.jsx)(eG,{children:(0,a.jsxs)(eJ,{children:[(0,a.jsx)(eK,{asChild:!0,children:(0,a.jsx)(y.P.div,{whileHover:{scale:1.1},whileTap:{scale:.95},children:(0,a.jsx)(m,{variant:"ghost",size:"sm",className:"text-gray-300 hover:text-white hover:bg-[#2a3942]",onClick:()=>E("video"),disabled:!r||!x,children:(0,a.jsx)(eA.A,{className:"w-5 h-5"})})})}),(0,a.jsx)(eZ,{children:(0,a.jsx)("p",{children:"Appel vid\xe9o"})})]})}),(0,a.jsx)(eG,{children:(0,a.jsxs)(eJ,{children:[(0,a.jsx)(eK,{asChild:!0,children:(0,a.jsx)(y.P.div,{whileHover:{scale:1.1},whileTap:{scale:.95},children:(0,a.jsx)(m,{variant:"ghost",size:"sm",className:"text-gray-300 hover:text-white hover:bg-[#2a3942]",children:(0,a.jsx)(B.A,{className:"w-5 h-5"})})})}),(0,a.jsx)(eZ,{children:(0,a.jsx)("p",{children:"Plus d'options"})})]})})]})]}),!x&&(0,a.jsx)("div",{className:"bg-yellow-600 text-white text-center py-2 text-sm",children:(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,a.jsx)(eS.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Connexion en cours... Les messages seront envoy\xe9s une fois connect\xe9."})]})}),(0,a.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-2 chat-background",children:[0===M.length?(0,a.jsxs)(y.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center text-gray-400 py-8",children:[(0,a.jsx)("p",{children:"Aucun message pour le moment"}),(0,a.jsx)("p",{className:"text-sm mt-2",children:"Commencez la conversation !"})]}):(0,a.jsx)(Z.N,{children:M.map((e,t)=>(0,a.jsx)(y.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{delay:.05*t,duration:.3},children:(0,a.jsx)(eW,{message:e})},e.id||t))}),(0,a.jsx)("div",{ref:w})]}),(0,a.jsx)(Z.N,{children:j&&(0,a.jsx)(eB,{onSendAudio:(e,t)=>{c({contenu:URL.createObjectURL(e),type:"audio",duree:t}),N(!1)},onCancel:()=>N(!1)})}),!j&&(0,a.jsxs)("div",{className:"bg-[#202c33] p-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(y.P.div,{whileHover:{scale:1.1},whileTap:{scale:.95},children:(0,a.jsx)(m,{variant:"ghost",size:"sm",className:"text-gray-300 hover:text-white hover:bg-[#2a3942]",onClick:()=>v(!g),children:(0,a.jsx)(V.A,{className:"w-5 h-5"})})}),(0,a.jsx)(Z.N,{children:g&&(0,a.jsx)(y.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},className:"absolute bottom-12 left-0 bg-[#233138] rounded-lg shadow-lg p-2 z-10 glass-effect",children:(0,a.jsx)("div",{className:"flex flex-col space-y-2",children:R.map((e,t)=>(0,a.jsxs)(y.P.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.1*t},whileHover:{scale:1.05},className:"flex items-center p-2 hover:bg-[#2a3942] rounded cursor-pointer",onClick:()=>{e.onClick(),v(!1)},children:[(0,a.jsx)(e.icon,{className:"w-5 h-5 mr-2 ".concat(e.color)}),(0,a.jsx)("span",{className:"text-white text-sm",children:e.label})]},e.label))})})})]}),(0,a.jsxs)("div",{className:"flex-1 relative",children:[(0,a.jsx)(u,{value:p,onChange:e=>f(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),P())},placeholder:x?"Entrez un message":"Connexion en cours...",className:"pr-20 bg-[#2a3942] border-[#2a3942] text-white placeholder-gray-400 focus:border-[#00a884] focus:ring-[#00a884]",disabled:!x}),(0,a.jsxs)("div",{className:"absolute right-2 top-1/2 transform -translate-y-1/2 flex items-center space-x-1",children:[(0,a.jsx)(y.P.div,{whileHover:{scale:1.1},whileTap:{scale:.95},children:(0,a.jsx)(m,{variant:"ghost",size:"sm",className:"text-gray-300 hover:text-white w-8 h-8 p-0",children:(0,a.jsx)(ek.A,{className:"w-5 h-5"})})}),p.trim()?(0,a.jsx)(y.P.div,{whileHover:{scale:1.1},whileTap:{scale:.95},children:(0,a.jsx)(m,{onClick:P,size:"sm",className:"bg-[#00a884] hover:bg-[#008069] w-8 h-8 p-0",disabled:!x,children:(0,a.jsx)(eD.A,{className:"w-4 h-4"})})}):(0,a.jsx)(y.P.div,{whileHover:{scale:1.1},whileTap:{scale:.95},children:(0,a.jsx)(m,{variant:"ghost",size:"sm",className:"text-gray-300 hover:text-white w-8 h-8 p-0",onClick:()=>N(!0),children:(0,a.jsx)(eI.A,{className:"w-5 h-5"})})})]})]})]}),(0,a.jsx)("input",{ref:S,type:"file",accept:"image/*",onChange:e=>{var t;let s=null===(t=e.target.files)||void 0===t?void 0:t[0];s&&T(s,"image")},className:"hidden"}),(0,a.jsx)("input",{ref:C,type:"file",onChange:e=>{var t;let s=null===(t=e.target.files)||void 0===t?void 0:t[0];s&&T(s,"file")},className:"hidden"})]})]})}eZ.displayName=eq.UC.displayName;var eY=s(3500),eQ=s(3127);let e$=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)("textarea",{className:o("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:t,...l})});function e0(e){let{user:t,statuses:s,setStatuses:r,contacts:n}=e,[i,c]=(0,l.useState)(!1),[o,d]=(0,l.useState)(""),[u,h]=(0,l.useState)("#00a884"),x=(0,l.useRef)(null),p=e=>{var t,s;let a=e.split(" ");return(((null===(t=a[0])||void 0===t?void 0:t[0])||"")+((null===(s=a[1])||void 0===s?void 0:s[0])||"")).toUpperCase()},f=e=>{let t=["#FF6B6B","#4ECDC4","#45B7D1","#96CEB4","#FFEAA7","#DDA0DD","#98D8C8","#F7DC6F"],s=e.charCodeAt(0)%t.length;return t[s]},g=e=>{let a=new FileReader;a.onload=e=>{var a;r([{id:Date.now().toString(),type:"image",contenu:null===(a=e.target)||void 0===a?void 0:a.result,timestamp:Date.now(),vues:0,auteur:t.nom},...s])},a.readAsDataURL(e)},v=e=>{let t=new Date,s=new Date(e),a=Math.floor((t.getTime()-s.getTime())/36e5);return a<1?"\xc0 l'instant":a<24?"Il y a ".concat(a,"h"):"Expir\xe9"},j=s.filter(e=>Date.now()-e.timestamp<864e5);return(0,a.jsxs)("div",{className:"flex-1 bg-[#111b21] flex",children:[(0,a.jsxs)("div",{className:"w-80 bg-[#111b21] border-r border-gray-700 flex flex-col",children:[(0,a.jsx)("div",{className:"p-4 bg-[#202c33] border-b border-gray-700",children:(0,a.jsx)("h2",{className:"text-xl font-semibold text-white mb-4",children:"Statuts"})}),(0,a.jsxs)("div",{className:"flex-1 overflow-y-auto",children:[(0,a.jsxs)("div",{className:"p-4 border-b border-gray-700",children:[(0,a.jsx)("h3",{className:"text-gray-300 text-sm font-medium mb-3",children:"Mon statut"}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(_,{className:"w-12 h-12 mr-3",children:(0,a.jsx)(O,{className:"text-white font-bold",style:{backgroundColor:f(t.nom)},children:p(t.nom)})}),(0,a.jsx)(m,{size:"sm",className:"absolute -bottom-1 -right-1 w-6 h-6 rounded-full bg-[#00a884] hover:bg-[#008069] p-0",onClick:()=>c(!0),children:(0,a.jsx)(V.A,{className:"w-3 h-3"})})]}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-white font-medium",children:"Mon statut"}),(0,a.jsx)("p",{className:"text-gray-400 text-sm",children:"Appuyez pour ajouter un statut"})]})]})]}),j.length>0&&(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsx)("h3",{className:"text-gray-300 text-sm font-medium mb-3",children:"R\xe9cents"}),(0,a.jsx)("div",{className:"space-y-3",children:j.map(e=>(0,a.jsxs)(y.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"flex items-center cursor-pointer hover:bg-[#2a3942] p-2 rounded",children:[(0,a.jsx)(_,{className:"w-12 h-12 mr-3 border-2 border-[#00a884]",children:(0,a.jsx)(O,{className:"text-white font-bold",style:{backgroundColor:f(e.auteur)},children:p(e.auteur)})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-white font-medium",children:e.auteur}),(0,a.jsx)("p",{className:"text-gray-400 text-sm",children:v(e.timestamp)})]})]},e.id))})]})]})]}),(0,a.jsx)("div",{className:"flex-1 bg-[#0b141a] flex items-center justify-center",children:(0,a.jsx)(Z.N,{children:i?(0,a.jsxs)(y.P.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"w-full max-w-md p-6 bg-[#202c33] rounded-lg m-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h3",{className:"text-white text-lg font-semibold",children:"Cr\xe9er un statut"}),(0,a.jsx)(m,{variant:"ghost",size:"sm",onClick:()=>c(!1),className:"text-gray-300 hover:text-white",children:(0,a.jsx)(eH.A,{className:"w-4 h-4"})})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"text-gray-300 text-sm font-medium mb-2 block",children:[(0,a.jsx)(eY.A,{className:"w-4 h-4 inline mr-2"}),"Statut texte"]}),(0,a.jsx)(e$,{value:o,onChange:e=>d(e.target.value),placeholder:"Quoi de neuf ?",className:"bg-[#2a3942] border-[#2a3942] text-white placeholder-gray-400 resize-none",rows:3})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"text-gray-300 text-sm font-medium mb-2 block",children:[(0,a.jsx)(eQ.A,{className:"w-4 h-4 inline mr-2"}),"Couleur de fond"]}),(0,a.jsx)("div",{className:"flex space-x-2",children:["#00a884","#ff6b6b","#4ecdc4","#45b7d1","#96ceb4","#ffeaa7","#dda0dd","#98d8c8"].map(e=>(0,a.jsx)("button",{className:"w-8 h-8 rounded-full border-2 ".concat(u===e?"border-white":"border-transparent"),style:{backgroundColor:e},onClick:()=>h(e)},e))})]}),o&&(0,a.jsx)("div",{className:"p-4 rounded-lg text-white text-center",style:{backgroundColor:u},children:o}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)(m,{onClick:()=>{o.trim()&&(r([{id:Date.now().toString(),type:"text",contenu:o,backgroundColor:u,timestamp:Date.now(),vues:0,auteur:t.nom},...s]),d(""),c(!1))},disabled:!o.trim(),className:"flex-1 bg-[#00a884] hover:bg-[#008069]",children:"Publier"}),(0,a.jsx)(m,{variant:"outline",onClick:()=>{var e;return null===(e=x.current)||void 0===e?void 0:e.click()},className:"border-[#2a3942] text-gray-300 hover:bg-[#2a3942]",children:(0,a.jsx)(ew.A,{className:"w-4 h-4"})})]})]}),(0,a.jsx)("input",{ref:x,type:"file",accept:"image/*",onChange:e=>{var t;let s=null===(t=e.target.files)||void 0===t?void 0:t[0];s&&g(s)},className:"hidden"})]}):(0,a.jsxs)(y.P.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center",children:[(0,a.jsx)("div",{className:"w-32 h-32 mx-auto mb-4 opacity-20",children:(0,a.jsx)("svg",{viewBox:"0 0 24 24",className:"w-full h-full text-gray-400",children:(0,a.jsx)("path",{fill:"currentColor",d:"M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4M12,6A6,6 0 0,0 6,12A6,6 0 0,0 12,18A6,6 0 0,0 18,12A6,6 0 0,0 12,6M12,8A4,4 0 0,1 16,12A4,4 0 0,1 12,16A4,4 0 0,1 8,12A4,4 0 0,1 12,8Z"})})}),(0,a.jsx)("h3",{className:"text-xl font-light text-gray-300 mb-2",children:"Statuts"}),(0,a.jsx)("p",{className:"text-gray-400 max-w-md mx-auto",children:"Cliquez sur un statut pour le voir ou cr\xe9ez le v\xf4tre pour le partager avec vos contacts."})]})})})]})}function e1(e){let{user:t,groups:s,setGroups:r,contacts:n,onSelectGroup:i,conversations:c}=e,[o,d]=(0,l.useState)(!1),[h,x]=(0,l.useState)(""),[p,f]=(0,l.useState)([]),g=e=>{var t,s;let a=e.split(" ");return(((null===(t=a[0])||void 0===t?void 0:t[0])||"")+((null===(s=a[1])||void 0===s?void 0:s[0])||"")).toUpperCase()},v=e=>{let t=["#FF6B6B","#4ECDC4","#45B7D1","#96CEB4","#FFEAA7","#DDA0DD","#98D8C8","#F7DC6F"],s=e.charCodeAt(0)%t.length;return t[s]},j=e=>{f(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])};return(0,a.jsx)("div",{className:"flex-1 bg-[#111b21] flex items-center justify-center",children:(0,a.jsx)(Z.N,{children:o?(0,a.jsxs)(y.P.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"w-full max-w-md p-6 bg-[#202c33] rounded-lg m-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h3",{className:"text-white text-lg font-semibold",children:"Nouveau groupe"}),(0,a.jsx)(m,{variant:"ghost",size:"sm",onClick:()=>d(!1),className:"text-gray-300 hover:text-white",children:(0,a.jsx)(eH.A,{className:"w-4 h-4"})})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"groupName",className:"block text-sm font-medium text-gray-300 mb-1",children:"Nom du groupe"}),(0,a.jsx)(u,{id:"groupName",type:"text",value:h,onChange:e=>x(e.target.value),placeholder:"Entrez le nom du groupe",className:"bg-[#2a3942] border-[#2a3942] text-white placeholder-gray-400 focus:border-[#00a884] focus:ring-[#00a884]",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Ajouter des participants"}),(0,a.jsx)("div",{className:"max-h-40 overflow-y-auto",children:n.map(e=>(0,a.jsxs)("label",{className:"flex items-center p-2 rounded hover:bg-[#2a3942] cursor-pointer ".concat(p.includes(e.id)?"bg-[#2a3942]":""),children:[(0,a.jsx)("input",{type:"checkbox",value:e.id,checked:p.includes(e.id),onChange:()=>j(e.id),className:"mr-2 accent-[#00a884]"}),(0,a.jsx)(_,{className:"w-8 h-8 mr-2",children:(0,a.jsx)(O,{className:"text-white font-bold",style:{backgroundColor:v(e.nom)},children:g(e.nom)})}),(0,a.jsx)("span",{className:"text-white",children:e.nom})]},e.id))})]}),(0,a.jsx)(m,{onClick:()=>{if(!h.trim()){alert("Veuillez entrer un nom de groupe");return}if(0===p.length){alert("Veuillez s\xe9lectionner au moins un contact");return}r([...s,{id:"group_".concat(Date.now()),name:h,createur:t.nom,members:[t.id,...p],dateCreation:new Date().toLocaleDateString("fr-FR")}]),x(""),f([]),d(!1)},className:"w-full gradient-button",children:"Cr\xe9er le groupe"})]})]}):(0,a.jsxs)(y.P.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center",children:[(0,a.jsx)("div",{className:"w-32 h-32 mx-auto mb-4 opacity-20",children:(0,a.jsx)(P.A,{className:"w-full h-full text-gray-400"})}),(0,a.jsx)("h3",{className:"text-xl font-light text-gray-300 mb-2",children:"Groupes"}),(0,a.jsx)("p",{className:"text-gray-400 max-w-md mx-auto",children:"Cr\xe9ez des groupes pour discuter avec plusieurs personnes en m\xeame temps."}),(0,a.jsxs)(m,{onClick:()=>d(!0),className:"mt-4 gradient-button",children:[(0,a.jsx)(V.A,{className:"w-4 h-4 mr-2"}),"Nouveau groupe"]})]})})})}e$.displayName="Textarea";var e2=s(9326),e4=s(8611),e3=s(2209),e8=s(675);function e5(e){let{user:t,contacts:s,calls:r,setCalls:n}=e,[i,c]=(0,l.useState)(""),[o,d]=(0,l.useState)(null),h=r.filter(e=>e.contactName.toLowerCase().includes(i.toLowerCase())),x=e=>{if(0===e)return"Non r\xe9pondu";let t=Math.floor(e/60);return"".concat(t,":").concat((e%60).toString().padStart(2,"0"))},p=e=>{let t=new Date(e),s=(new Date().getTime()-t.getTime())/36e5;return s<24?t.toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"}):s<48?"Hier":t.toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit"})},f=e=>"missed"===e.status?(0,a.jsx)(e2.A,{className:"w-4 h-4 text-red-500"}):"incoming"===e.direction?(0,a.jsx)(e4.A,{className:"w-4 h-4 text-green-500"}):(0,a.jsx)(e3.A,{className:"w-4 h-4 text-green-500"}),g=(e,t)=>{let a=s.find(t=>t.id===e);if(!a)return;let l={id:"call_".concat(Date.now()),contactId:e,contactName:a.nom,type:t,direction:"outgoing",status:"completed",timestamp:new Date().toISOString(),duration:Math.floor(300*Math.random())+30};n([l,...r]),d({...l,contact:a}),setTimeout(()=>{d(null)},3e3)},v=e=>{let{call:t}=e,l=s.find(e=>e.id===t.contactId);return(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 hover:bg-[#2a3942] rounded-lg transition-colors",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsxs)(_,{className:"w-12 h-12",children:[(0,a.jsx)(L,{src:(null==l?void 0:l.avatar)||"/placeholder.svg"}),(0,a.jsx)(O,{className:"bg-[#00a884] text-white",children:t.contactName.charAt(0).toUpperCase()})]}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[f(t),(0,a.jsx)("h3",{className:"font-medium text-white",children:t.contactName})]}),(0,a.jsx)("p",{className:"text-sm text-gray-400",children:p(t.timestamp)})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("span",{className:"text-sm text-gray-400",children:x(t.duration)}),(0,a.jsx)(m,{variant:"ghost",size:"sm",onClick:()=>g(t.contactId,t.type),className:"text-[#00a884] hover:bg-[#00a884]/10",children:"video"===t.type?(0,a.jsx)(eA.A,{className:"w-4 h-4"}):(0,a.jsx)(I.A,{className:"w-4 h-4"})})]})]})},j=e=>{let{contact:t}=e;return(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 hover:bg-[#2a3942] rounded-lg transition-colors",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsxs)(_,{className:"w-12 h-12",children:[(0,a.jsx)(L,{src:t.avatar||"/placeholder.svg"}),(0,a.jsx)(O,{className:"bg-[#00a884] text-white",children:t.nom.charAt(0).toUpperCase()})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-medium text-white",children:t.nom}),(0,a.jsx)("p",{className:"text-sm text-gray-400",children:t.telephone})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(m,{variant:"ghost",size:"sm",onClick:()=>g(t.id,"voice"),className:"text-[#00a884] hover:bg-[#00a884]/10",children:(0,a.jsx)(I.A,{className:"w-4 h-4"})}),(0,a.jsx)(m,{variant:"ghost",size:"sm",onClick:()=>g(t.id,"video"),className:"text-[#00a884] hover:bg-[#00a884]/10",children:(0,a.jsx)(eA.A,{className:"w-4 h-4"})})]})]})};if(o){var N;return(0,a.jsx)("div",{className:"flex-1 bg-[#0b141a] flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)(_,{className:"w-32 h-32 mx-auto mb-4",children:[(0,a.jsx)(L,{src:(null===(N=o.contact)||void 0===N?void 0:N.avatar)||"/placeholder.svg"}),(0,a.jsx)(O,{className:"bg-[#00a884] text-white text-4xl",children:o.contactName.charAt(0).toUpperCase()})]}),(0,a.jsx)("h2",{className:"text-2xl font-light text-white mb-2",children:o.contactName}),(0,a.jsxs)("p",{className:"text-gray-400 mb-8",children:["video"===o.type?"Appel vid\xe9o":"Appel vocal"," en cours..."]}),(0,a.jsx)("div",{className:"flex justify-center space-x-4",children:(0,a.jsx)(m,{variant:"destructive",size:"lg",onClick:()=>d(null),className:"rounded-full w-16 h-16",children:(0,a.jsx)(e8.A,{className:"w-6 h-6"})})})]})})}return(0,a.jsxs)("div",{className:"flex-1 bg-[#0b141a] flex flex-col",children:[(0,a.jsxs)("div",{className:"p-4 border-b border-[#2a3942]",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h1",{className:"text-xl font-light text-white",children:"Appels"}),(0,a.jsxs)(er,{children:[(0,a.jsx)(en,{asChild:!0,children:(0,a.jsx)(m,{variant:"ghost",size:"sm",className:"text-gray-400",children:(0,a.jsx)(B.A,{className:"w-5 h-5"})})}),(0,a.jsxs)(ei,{align:"end",className:"bg-[#2a3942] border-[#3b4a54]",children:[(0,a.jsx)(ec,{className:"text-white hover:bg-[#3b4a54]",children:"Effacer l'historique des appels"}),(0,a.jsx)(ec,{className:"text-white hover:bg-[#3b4a54]",children:"Param\xe8tres d'appel"})]})]})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(H.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,a.jsx)(u,{placeholder:"Rechercher...",value:i,onChange:e=>c(e.target.value),className:"pl-10 bg-[#2a3942] border-[#3b4a54] text-white placeholder-gray-400"})]})]}),(0,a.jsxs)(Y,{defaultValue:"recent",className:"flex-1 flex flex-col",children:[(0,a.jsxs)(Q,{className:"grid w-full grid-cols-2 bg-[#2a3942] mx-4 mt-4",children:[(0,a.jsx)($,{value:"recent",className:"data-[state=active]:bg-[#00a884] data-[state=active]:text-white",children:"R\xe9cents"}),(0,a.jsx)($,{value:"contacts",className:"data-[state=active]:bg-[#00a884] data-[state=active]:text-white",children:"Contacts"})]}),(0,a.jsx)(ee,{value:"recent",className:"flex-1 overflow-y-auto p-4 space-y-2",children:0===h.length?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(e8.A,{className:"w-16 h-16 text-gray-600 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-400",children:"Aucun appel r\xe9cent"})]}):h.map(e=>(0,a.jsx)(v,{call:e},e.id))}),(0,a.jsx)(ee,{value:"contacts",className:"flex-1 overflow-y-auto p-4 space-y-2",children:s.filter(e=>e.nom.toLowerCase().includes(i.toLowerCase())).map(e=>(0,a.jsx)(j,{contact:e},e.id))})]})]})}var e6=s(4940),e9=s(4835),e7=s(1007),te=s(968);let tt=(0,n.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),ts=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)(te.b,{ref:t,className:o(tt(),s),...l})});ts.displayName=te.b.displayName;var ta=s(4884);let tl=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)(ta.bL,{className:o("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",s),...l,ref:t,children:(0,a.jsx)(ta.zi,{className:o("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});tl.displayName=ta.bL.displayName;var tr=s(4582),tn=s(6474),ti=s(7863);let tc=tr.bL;tr.YJ;let to=tr.WT,td=l.forwardRef((e,t)=>{let{className:s,children:l,...r}=e;return(0,a.jsxs)(tr.l9,{ref:t,className:o("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",s),...r,children:[l,(0,a.jsx)(tr.In,{asChild:!0,children:(0,a.jsx)(tn.A,{className:"h-4 w-4 opacity-50"})})]})});td.displayName=tr.l9.displayName;let tm=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)(tr.PP,{ref:t,className:o("flex cursor-default items-center justify-center py-1",s),...l,children:(0,a.jsx)(ti.A,{className:"h-4 w-4"})})});tm.displayName=tr.PP.displayName;let tu=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)(tr.wn,{ref:t,className:o("flex cursor-default items-center justify-center py-1",s),...l,children:(0,a.jsx)(tn.A,{className:"h-4 w-4"})})});tu.displayName=tr.wn.displayName;let th=l.forwardRef((e,t)=>{let{className:s,children:l,position:r="popper",...n}=e;return(0,a.jsx)(tr.ZL,{children:(0,a.jsxs)(tr.UC,{ref:t,className:o("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===r&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:r,...n,children:[(0,a.jsx)(tm,{}),(0,a.jsx)(tr.LM,{className:o("p-1","popper"===r&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:l}),(0,a.jsx)(tu,{})]})})});th.displayName=tr.UC.displayName,l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)(tr.JU,{ref:t,className:o("py-1.5 pl-8 pr-2 text-sm font-semibold",s),...l})}).displayName=tr.JU.displayName;let tx=l.forwardRef((e,t)=>{let{className:s,children:l,...r}=e;return(0,a.jsxs)(tr.q7,{ref:t,className:o("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...r,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(tr.VF,{children:(0,a.jsx)(ea.A,{className:"h-4 w-4"})})}),(0,a.jsx)(tr.p4,{children:l})]})});tx.displayName=tr.q7.displayName,l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)(tr.wv,{ref:t,className:o("-mx-1 my-1 h-px bg-muted",s),...l})}).displayName=tr.wv.displayName;var tp=s(7489);let tf=l.forwardRef((e,t)=>{let{className:s,orientation:l="horizontal",decorative:r=!0,...n}=e;return(0,a.jsx)(tp.b,{ref:t,decorative:r,orientation:l,className:o("shrink-0 bg-border","horizontal"===l?"h-[1px] w-full":"h-full w-[1px]",s),...n})});function tg(e){let{user:t,onUpdateUser:s,onLogout:r}=e,[n,i]=(0,l.useState)("profile"),[c,o]=(0,l.useState)(!1),[d,v]=(0,l.useState)({nom:t.nom||"",description:t.description||"Salut ! J'utilise WhatsApp.",telephone:t.telephone||""}),[b,y]=(0,l.useState)({lastSeen:"everyone",profilePhoto:"everyone",about:"everyone",status:"everyone",readReceipts:!0,groups:"everyone",liveLocation:"none"}),[w,C]=(0,l.useState)({messageNotifications:!0,showPreview:!0,groupNotifications:!0,callNotifications:!0,sound:"default",vibration:!0}),[S,A]=(0,l.useState)({twoFactorAuth:!1,fingerprintLock:!1,autoLock:"immediately",showSecurityNotifications:!0}),[k,I]=(0,l.useState)({theme:"dark",language:"fr",fontSize:"medium",autoDownloadPhotos:!0,autoDownloadVideos:!1,autoDownloadDocuments:!1}),P=()=>{s(d),o(!1)};return(0,a.jsxs)("div",{className:"flex-1 bg-[#0b141a] flex flex-col",children:[(0,a.jsx)("div",{className:"p-4 border-b border-[#2a3942]",children:(0,a.jsx)("h1",{className:"text-xl font-light text-white",children:"Param\xe8tres"})}),(0,a.jsxs)(Y,{value:n,onValueChange:i,className:"flex-1 flex flex-col",children:[(0,a.jsxs)(Q,{className:"grid w-full grid-cols-4 bg-[#2a3942] mx-4 mt-4",children:[(0,a.jsxs)($,{value:"profile",className:"data-[state=active]:bg-[#00a884] data-[state=active]:text-white",children:[(0,a.jsx)(e7.A,{className:"w-4 h-4 mr-1"}),"Profil"]}),(0,a.jsxs)($,{value:"privacy",className:"data-[state=active]:bg-[#00a884] data-[state=active]:text-white",children:[(0,a.jsx)(j.A,{className:"w-4 h-4 mr-1"}),"Confidentialit\xe9"]}),(0,a.jsxs)($,{value:"notifications",className:"data-[state=active]:bg-[#00a884] data-[state=active]:text-white",children:[(0,a.jsx)(D.A,{className:"w-4 h-4 mr-1"}),"Notifications"]}),(0,a.jsxs)($,{value:"app",className:"data-[state=active]:bg-[#00a884] data-[state=active]:text-white",children:[(0,a.jsx)(N.A,{className:"w-4 h-4 mr-1"}),"App"]})]}),(0,a.jsxs)("div",{className:"flex-1 overflow-y-auto p-4",children:[(0,a.jsx)(ee,{value:"profile",children:(0,a.jsx)(()=>{var e;return(0,a.jsx)("div",{className:"space-y-6",children:(0,a.jsxs)(h,{className:"bg-[#2a3942] border-[#3b4a54]",children:[(0,a.jsxs)(x,{children:[(0,a.jsx)(p,{className:"text-white",children:"Profil"}),(0,a.jsx)(f,{className:"text-gray-400",children:"G\xe9rez vos informations personnelles"})]}),(0,a.jsxs)(g,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)(_,{className:"w-20 h-20",children:[(0,a.jsx)(L,{src:t.avatar||"/placeholder.svg"}),(0,a.jsx)(O,{className:"bg-[#00a884] text-white text-2xl",children:(null===(e=t.nom)||void 0===e?void 0:e.charAt(0).toUpperCase())||"U"})]}),(0,a.jsx)(m,{size:"sm",className:"absolute -bottom-2 -right-2 rounded-full w-8 h-8 bg-[#00a884] hover:bg-[#00a884]/80",children:(0,a.jsx)(ew.A,{className:"w-4 h-4"})})]}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-white",children:t.nom}),(0,a.jsx)("p",{className:"text-sm text-gray-400",children:t.telephone})]}),(0,a.jsx)(m,{variant:"ghost",size:"sm",onClick:()=>o(!c),className:"text-[#00a884]",children:(0,a.jsx)(e6.A,{className:"w-4 h-4"})})]}),c&&(0,a.jsxs)("div",{className:"space-y-4 pt-4 border-t border-[#3b4a54]",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(ts,{htmlFor:"nom",className:"text-white",children:"Nom"}),(0,a.jsx)(u,{id:"nom",value:d.nom,onChange:e=>v({...d,nom:e.target.value}),className:"bg-[#3b4a54] border-[#4a5c6a] text-white"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(ts,{htmlFor:"description",className:"text-white",children:"Description"}),(0,a.jsx)(e$,{id:"description",value:d.description,onChange:e=>v({...d,description:e.target.value}),className:"bg-[#3b4a54] border-[#4a5c6a] text-white",rows:3})]}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)(m,{onClick:P,className:"bg-[#00a884] hover:bg-[#00a884]/80",children:"Enregistrer"}),(0,a.jsx)(m,{variant:"outline",onClick:()=>o(!1),children:"Annuler"})]})]})]})]})})},{})}),(0,a.jsx)(ee,{value:"privacy",children:(0,a.jsx)(()=>(0,a.jsx)("div",{className:"space-y-6",children:(0,a.jsxs)(h,{className:"bg-[#2a3942] border-[#3b4a54]",children:[(0,a.jsxs)(x,{children:[(0,a.jsx)(p,{className:"text-white",children:"Confidentialit\xe9"}),(0,a.jsx)(f,{className:"text-gray-400",children:"Contr\xf4lez qui peut voir vos informations"})]}),(0,a.jsxs)(g,{className:"space-y-4",children:[[{key:"lastSeen",label:"Vu pour la derni\xe8re fois"},{key:"profilePhoto",label:"Photo de profil"},{key:"about",label:"Description"},{key:"status",label:"Statut"},{key:"groups",label:"Groupes"}].map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(ts,{className:"text-white",children:e.label}),(0,a.jsxs)(tc,{value:b[e.key],onValueChange:t=>y({...b,[e.key]:t}),children:[(0,a.jsx)(td,{className:"w-32 bg-[#3b4a54] border-[#4a5c6a] text-white",children:(0,a.jsx)(to,{})}),(0,a.jsxs)(th,{className:"bg-[#3b4a54] border-[#4a5c6a]",children:[(0,a.jsx)(tx,{value:"everyone",className:"text-white",children:"Tout le monde"}),(0,a.jsx)(tx,{value:"contacts",className:"text-white",children:"Mes contacts"}),(0,a.jsx)(tx,{value:"nobody",className:"text-white",children:"Personne"})]})]})]},e.key)),(0,a.jsx)(tf,{className:"bg-[#3b4a54]"}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(ts,{className:"text-white",children:"Confirmations de lecture"}),(0,a.jsx)(tl,{checked:b.readReceipts,onCheckedChange:e=>y({...b,readReceipts:e})})]})]})]})}),{})}),(0,a.jsx)(ee,{value:"notifications",children:(0,a.jsx)(()=>(0,a.jsx)("div",{className:"space-y-6",children:(0,a.jsxs)(h,{className:"bg-[#2a3942] border-[#3b4a54]",children:[(0,a.jsxs)(x,{children:[(0,a.jsx)(p,{className:"text-white",children:"Notifications"}),(0,a.jsx)(f,{className:"text-gray-400",children:"Personnalisez vos notifications"})]}),(0,a.jsxs)(g,{className:"space-y-4",children:[[{key:"messageNotifications",label:"Notifications de messages"},{key:"showPreview",label:"Aper\xe7u des messages"},{key:"groupNotifications",label:"Notifications de groupe"},{key:"callNotifications",label:"Notifications d'appel"},{key:"vibration",label:"Vibration"}].map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(ts,{className:"text-white",children:e.label}),(0,a.jsx)(tl,{checked:w[e.key],onCheckedChange:t=>C({...w,[e.key]:t})})]},e.key)),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(ts,{className:"text-white",children:"Son de notification"}),(0,a.jsxs)(tc,{value:w.sound,onValueChange:e=>C({...w,sound:e}),children:[(0,a.jsx)(td,{className:"w-32 bg-[#3b4a54] border-[#4a5c6a] text-white",children:(0,a.jsx)(to,{})}),(0,a.jsxs)(th,{className:"bg-[#3b4a54] border-[#4a5c6a]",children:[(0,a.jsx)(tx,{value:"default",className:"text-white",children:"Par d\xe9faut"}),(0,a.jsx)(tx,{value:"classic",className:"text-white",children:"Classique"}),(0,a.jsx)(tx,{value:"modern",className:"text-white",children:"Moderne"}),(0,a.jsx)(tx,{value:"none",className:"text-white",children:"Aucun"})]})]})]})]})]})}),{})}),(0,a.jsx)(ee,{value:"app",children:(0,a.jsx)(()=>(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)(h,{className:"bg-[#2a3942] border-[#3b4a54]",children:[(0,a.jsxs)(x,{children:[(0,a.jsx)(p,{className:"text-white",children:"Application"}),(0,a.jsx)(f,{className:"text-gray-400",children:"Personnalisez l'apparence et le comportement"})]}),(0,a.jsxs)(g,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(ts,{className:"text-white",children:"Th\xe8me"}),(0,a.jsxs)(tc,{value:k.theme,onValueChange:e=>I({...k,theme:e}),children:[(0,a.jsx)(td,{className:"w-32 bg-[#3b4a54] border-[#4a5c6a] text-white",children:(0,a.jsx)(to,{})}),(0,a.jsxs)(th,{className:"bg-[#3b4a54] border-[#4a5c6a]",children:[(0,a.jsx)(tx,{value:"light",className:"text-white",children:"Clair"}),(0,a.jsx)(tx,{value:"dark",className:"text-white",children:"Sombre"}),(0,a.jsx)(tx,{value:"auto",className:"text-white",children:"Automatique"})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(ts,{className:"text-white",children:"Langue"}),(0,a.jsxs)(tc,{value:k.language,onValueChange:e=>I({...k,language:e}),children:[(0,a.jsx)(td,{className:"w-32 bg-[#3b4a54] border-[#4a5c6a] text-white",children:(0,a.jsx)(to,{})}),(0,a.jsxs)(th,{className:"bg-[#3b4a54] border-[#4a5c6a]",children:[(0,a.jsx)(tx,{value:"fr",className:"text-white",children:"Fran\xe7ais"}),(0,a.jsx)(tx,{value:"en",className:"text-white",children:"English"}),(0,a.jsx)(tx,{value:"es",className:"text-white",children:"Espa\xf1ol"}),(0,a.jsx)(tx,{value:"ar",className:"text-white",children:"العربية"})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(ts,{className:"text-white",children:"Taille de police"}),(0,a.jsxs)(tc,{value:k.fontSize,onValueChange:e=>I({...k,fontSize:e}),children:[(0,a.jsx)(td,{className:"w-32 bg-[#3b4a54] border-[#4a5c6a] text-white",children:(0,a.jsx)(to,{})}),(0,a.jsxs)(th,{className:"bg-[#3b4a54] border-[#4a5c6a]",children:[(0,a.jsx)(tx,{value:"small",className:"text-white",children:"Petite"}),(0,a.jsx)(tx,{value:"medium",className:"text-white",children:"Moyenne"}),(0,a.jsx)(tx,{value:"large",className:"text-white",children:"Grande"})]})]})]}),(0,a.jsx)(tf,{className:"bg-[#3b4a54]"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("h4",{className:"text-white font-medium",children:"T\xe9l\xe9chargement automatique"}),[{key:"autoDownloadPhotos",label:"Photos"},{key:"autoDownloadVideos",label:"Vid\xe9os"},{key:"autoDownloadDocuments",label:"Documents"}].map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(ts,{className:"text-white",children:e.label}),(0,a.jsx)(tl,{checked:k[e.key],onCheckedChange:t=>I({...k,[e.key]:t})})]},e.key))]})]})]}),(0,a.jsxs)(h,{className:"bg-[#2a3942] border-[#3b4a54]",children:[(0,a.jsx)(x,{children:(0,a.jsx)(p,{className:"text-white",children:"Stockage et donn\xe9es"})}),(0,a.jsxs)(g,{className:"space-y-4",children:[(0,a.jsxs)(m,{variant:"outline",className:"w-full justify-start text-white border-[#3b4a54]",children:[(0,a.jsx)(eF.A,{className:"w-4 h-4 mr-2"}),"Exporter les donn\xe9es"]}),(0,a.jsxs)(m,{variant:"outline",className:"w-full justify-start text-white border-[#3b4a54]",children:[(0,a.jsx)(R.A,{className:"w-4 h-4 mr-2"}),"G\xe9rer le stockage"]}),(0,a.jsxs)(m,{variant:"destructive",className:"w-full justify-start",children:[(0,a.jsx)(q.A,{className:"w-4 h-4 mr-2"}),"Supprimer toutes les donn\xe9es"]})]})]}),(0,a.jsx)(h,{className:"bg-[#2a3942] border-[#3b4a54]",children:(0,a.jsx)(g,{className:"pt-6",children:(0,a.jsxs)(m,{onClick:r,variant:"destructive",className:"w-full",children:[(0,a.jsx)(e9.A,{className:"w-4 h-4 mr-2"}),"D\xe9connexion"]})})})]}),{})})]})]})]})}function tv(e){let{onSync:t,onCancel:s,isLoading:r}=e,[n,i]=(0,l.useState)("permission"),[c,o]=(0,l.useState)(0),d=async()=>{i("syncing");try{await t(),o(Math.floor(50*Math.random())+10),i("complete"),setTimeout(()=>{s()},2e3)}catch(e){console.error("Erreur de synchronisation:",e),i("permission")}};return(0,a.jsx)("div",{className:"flex-1 bg-[#0b141a] flex items-center justify-center p-4",children:(0,a.jsx)(y.P.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},className:"w-full max-w-md",children:(0,a.jsxs)(h,{className:"bg-[#202c33] border-[#2a3942]",children:[(0,a.jsx)(x,{className:"text-center",children:(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsx)(m,{variant:"ghost",size:"sm",onClick:s,className:"text-gray-300",children:(0,a.jsx)(b.A,{className:"w-4 h-4"})}),(0,a.jsx)(p,{className:"text-white",children:"Synchroniser les contacts"}),(0,a.jsx)("div",{})]})}),(0,a.jsxs)(g,{className:"space-y-6",children:["permission"===n&&(0,a.jsxs)(y.P.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},className:"text-center space-y-6",children:[(0,a.jsx)("div",{className:"w-24 h-24 mx-auto bg-[#00a884] rounded-full flex items-center justify-center",children:(0,a.jsx)(N.A,{className:"w-12 h-12 text-white"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-white mb-2",children:"Synchroniser vos contacts"}),(0,a.jsx)("p",{className:"text-gray-400 text-sm",children:"WhatsApp va acc\xe9der \xe0 vos contacts pour vous aider \xe0 trouver vos amis qui utilisent WhatsApp."})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 text-sm text-gray-300",children:[(0,a.jsx)(j.A,{className:"w-5 h-5 text-[#00a884]"}),(0,a.jsx)("span",{children:"Vos contacts sont chiffr\xe9s et s\xe9curis\xe9s"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3 text-sm text-gray-300",children:[(0,a.jsx)(P.A,{className:"w-5 h-5 text-[#00a884]"}),(0,a.jsx)("span",{children:"Trouvez facilement vos amis sur WhatsApp"})]})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)(m,{onClick:d,className:"w-full bg-[#00a884] hover:bg-[#008069]",disabled:r,children:r?"Synchronisation...":"Synchroniser les contacts"}),(0,a.jsx)(m,{variant:"ghost",onClick:s,className:"w-full text-gray-300",children:"Ignorer pour le moment"})]})]}),"syncing"===n&&(0,a.jsxs)(y.P.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},className:"text-center space-y-6",children:[(0,a.jsx)("div",{className:"w-24 h-24 mx-auto bg-[#00a884] rounded-full flex items-center justify-center",children:(0,a.jsx)(y.P.div,{animate:{rotate:360},transition:{duration:2,repeat:Number.POSITIVE_INFINITY,ease:"linear"},children:(0,a.jsx)(N.A,{className:"w-12 h-12 text-white"})})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-white mb-2",children:"Synchronisation en cours..."}),(0,a.jsx)("p",{className:"text-gray-400 text-sm",children:"Recherche de vos contacts sur WhatsApp"})]}),(0,a.jsx)("div",{className:"w-full bg-[#2a3942] rounded-full h-2",children:(0,a.jsx)(y.P.div,{className:"bg-[#00a884] h-2 rounded-full",initial:{width:"0%"},animate:{width:"100%"},transition:{duration:3}})})]}),"complete"===n&&(0,a.jsxs)(y.P.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},className:"text-center space-y-6",children:[(0,a.jsx)("div",{className:"w-24 h-24 mx-auto bg-[#00a884] rounded-full flex items-center justify-center",children:(0,a.jsx)(G.A,{className:"w-12 h-12 text-white"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-white mb-2",children:"Synchronisation termin\xe9e !"}),(0,a.jsxs)("p",{className:"text-gray-400 text-sm",children:[c," contacts trouv\xe9s sur WhatsApp"]})]}),(0,a.jsx)(y.P.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.5},className:"text-[#00a884] text-2xl font-bold",children:"✓"})]})]})]})})})}tf.displayName=tp.b.displayName;var tj=s(3904);function tN(e){let{onClose:t}=e,[s,r]=(0,l.useState)(""),[n,i]=(0,l.useState)(!1),[c,o]=(0,l.useState)(30);return((0,l.useEffect)(()=>{let e=()=>{let e=Date.now(),t=Math.random().toString(36).substring(7);r("whatsapp://web/".concat(e,"/").concat(t))};e();let t=setInterval(e,3e4);return()=>clearInterval(t)},[]),(0,l.useEffect)(()=>{let e=setInterval(()=>{o(e=>e<=1?30:e-1)},1e3);return()=>clearInterval(e)},[]),(0,l.useEffect)(()=>{let e=setTimeout(()=>{i(!0),setTimeout(t,2e3)},1e4);return()=>clearTimeout(e)},[t]),n)?(0,a.jsx)("div",{className:"flex-1 bg-[#0b141a] flex items-center justify-center p-4",children:(0,a.jsxs)(y.P.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},className:"text-center",children:[(0,a.jsx)("div",{className:"w-32 h-32 mx-auto mb-6 bg-[#00a884] rounded-full flex items-center justify-center",children:(0,a.jsx)(y.P.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.3},children:"✓"})}),(0,a.jsx)("h3",{className:"text-xl font-light text-gray-300 mb-2",children:"Connect\xe9 !"}),(0,a.jsx)("p",{className:"text-gray-400",children:"WhatsApp Web est maintenant connect\xe9"})]})}):(0,a.jsx)("div",{className:"flex-1 bg-[#0b141a] flex items-center justify-center p-4",children:(0,a.jsx)(y.P.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},className:"w-full max-w-2xl",children:(0,a.jsxs)(h,{className:"bg-[#202c33] border-[#2a3942]",children:[(0,a.jsx)(x,{children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)(p,{className:"text-white",children:"WhatsApp Web"}),(0,a.jsx)(m,{variant:"ghost",size:"sm",onClick:t,className:"text-gray-300",children:(0,a.jsx)(eH.A,{className:"w-4 h-4"})})]})}),(0,a.jsx)(g,{className:"space-y-6",children:(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-8",children:[(0,a.jsxs)("div",{className:"text-center space-y-4",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"w-64 h-64 mx-auto bg-white rounded-lg p-4 flex items-center justify-center",children:(0,a.jsx)("div",{className:"w-full h-full bg-black relative",children:(0,a.jsx)("div",{className:"absolute inset-2 bg-white",children:(0,a.jsx)("div",{className:"grid grid-cols-8 gap-1 h-full",children:Array.from({length:64}).map((e,t)=>(0,a.jsx)("div",{className:"".concat(Math.random()>.5?"bg-black":"bg-white")},t))})})})}),(0,a.jsx)("div",{className:"absolute -bottom-2 left-1/2 transform -translate-x-1/2 bg-[#202c33] px-3 py-1 rounded-full",children:(0,a.jsxs)("span",{className:"text-xs text-gray-400",children:["Renouvellement dans ",c,"s"]})})]}),(0,a.jsxs)("div",{className:"flex justify-center space-x-2",children:[(0,a.jsxs)(m,{variant:"ghost",size:"sm",onClick:()=>{let e=Date.now(),t=Math.random().toString(36).substring(7);r("whatsapp://web/".concat(e,"/").concat(t)),o(30)},className:"text-gray-300 hover:text-white",children:[(0,a.jsx)(tj.A,{className:"w-4 h-4 mr-2"}),"Actualiser"]}),(0,a.jsxs)(m,{variant:"ghost",size:"sm",onClick:()=>{let e=document.createElement("canvas"),t=e.getContext("2d");if(t){e.width=256,e.height=256,t.fillStyle="#ffffff",t.fillRect(0,0,256,256),t.fillStyle="#000000",t.font="12px Arial",t.fillText("QR Code WhatsApp",10,20);let s=document.createElement("a");s.download="whatsapp-qr.png",s.href=e.toDataURL(),s.click()}},className:"text-gray-300 hover:text-white",children:[(0,a.jsx)(eF.A,{className:"w-4 h-4 mr-2"}),"T\xe9l\xe9charger"]})]})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-white mb-4",children:"Utiliser WhatsApp sur votre ordinateur"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)("div",{className:"w-6 h-6 bg-[#00a884] rounded-full flex items-center justify-center text-white text-sm font-bold",children:"1"}),(0,a.jsx)("div",{children:(0,a.jsx)("p",{className:"text-gray-300 text-sm",children:"Ouvrez WhatsApp sur votre t\xe9l\xe9phone"})})]}),(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)("div",{className:"w-6 h-6 bg-[#00a884] rounded-full flex items-center justify-center text-white text-sm font-bold",children:"2"}),(0,a.jsx)("div",{children:(0,a.jsxs)("p",{className:"text-gray-300 text-sm",children:["Appuyez sur ",(0,a.jsx)("strong",{children:"Menu"})," ou ",(0,a.jsx)("strong",{children:"Param\xe8tres"})," et s\xe9lectionnez"," ",(0,a.jsx)("strong",{children:"Appareils li\xe9s"})]})})]}),(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)("div",{className:"w-6 h-6 bg-[#00a884] rounded-full flex items-center justify-center text-white text-sm font-bold",children:"3"}),(0,a.jsx)("div",{children:(0,a.jsx)("p",{className:"text-gray-300 text-sm",children:"Pointez votre t\xe9l\xe9phone vers cet \xe9cran pour scanner le code QR"})})]})]})]}),(0,a.jsxs)("div",{className:"bg-[#2a3942] rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 mb-3",children:[(0,a.jsx)(W.A,{className:"w-5 h-5 text-[#00a884]"}),(0,a.jsx)("span",{className:"text-white font-medium",children:"Gardez votre t\xe9l\xe9phone connect\xe9"})]}),(0,a.jsx)("p",{className:"text-gray-400 text-sm",children:"WhatsApp se connecte \xe0 votre t\xe9l\xe9phone pour synchroniser les messages. Pour r\xe9duire l'utilisation des donn\xe9es, connectez votre t\xe9l\xe9phone au Wi-Fi."})]}),(0,a.jsxs)("div",{className:"bg-[#2a3942] rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 mb-3",children:[(0,a.jsx)(N.A,{className:"w-5 h-5 text-[#00a884]"}),(0,a.jsx)("span",{className:"text-white font-medium",children:"Appareils multiples"})]}),(0,a.jsx)("p",{className:"text-gray-400 text-sm",children:"Vous pouvez maintenant utiliser WhatsApp sur jusqu'\xe0 4 appareils li\xe9s et 1 t\xe9l\xe9phone en m\xeame temps."})]})]})]})})]})})})}var tb=s(6076);function ty(e){let{callData:t,onAccept:s,onReject:r,contacts:n}=e,[i,c]=(0,l.useState)(!0);(0,l.useRef)(null);let o=n.find(e=>e.id===t.from)||{nom:"Inconnu",avatar:null};return(0,l.useEffect)(()=>{let e=new(window.AudioContext||window.webkitAudioContext),t=e.createOscillator(),s=e.createGain();t.type="sine",t.frequency.setValueAtTime(440,e.currentTime),s.gain.setValueAtTime(0,e.currentTime),s.gain.linearRampToValueAtTime(.5,e.currentTime+.1),s.gain.linearRampToValueAtTime(0,e.currentTime+.6),t.connect(s),s.connect(e.destination),t.start();let a=setInterval(()=>{i&&(s.gain.setValueAtTime(0,e.currentTime),s.gain.linearRampToValueAtTime(.5,e.currentTime+.1),s.gain.linearRampToValueAtTime(0,e.currentTime+.6))},1e3);return"vibrate"in navigator&&navigator.vibrate([300,100,300,100,300]),()=>{clearInterval(a),t.stop(),e.close(),"vibrate"in navigator&&navigator.vibrate(0)}},[i]),(0,a.jsx)(y.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70",children:(0,a.jsxs)("div",{className:"bg-[#1f2c34] rounded-lg shadow-xl w-full max-w-md p-6 text-center",children:[(0,a.jsx)(y.P.div,{animate:{scale:[1,1.05,1]},transition:{repeat:Number.POSITIVE_INFINITY,duration:1},className:"w-24 h-24 rounded-full bg-[#00a884] mx-auto mb-4 flex items-center justify-center",children:o.avatar?(0,a.jsx)("img",{src:o.avatar||"/placeholder.svg",alt:o.nom,className:"w-full h-full rounded-full object-cover"}):(0,a.jsx)("span",{className:"text-4xl text-white",children:o.nom.charAt(0)})}),(0,a.jsx)("h3",{className:"text-xl font-medium text-white mb-1",children:o.nom}),(0,a.jsx)("p",{className:"text-gray-300 mb-6",children:"video"===t.type?"Appel vid\xe9o entrant":"Appel vocal entrant"}),(0,a.jsxs)("div",{className:"flex justify-center space-x-8",children:[(0,a.jsx)(m,{onClick:()=>{c(!1),r()},className:"w-16 h-16 rounded-full bg-red-600 hover:bg-red-700 flex items-center justify-center",children:(0,a.jsx)(tb.A,{className:"w-8 h-8"})}),(0,a.jsx)(m,{onClick:()=>{c(!1),s()},className:"w-16 h-16 rounded-full bg-green-600 hover:bg-green-700 flex items-center justify-center",children:"video"===t.type?(0,a.jsx)(eA.A,{className:"w-8 h-8"}):(0,a.jsx)(I.A,{className:"w-8 h-8"})})]})]})})}var tw=s(1951),tC=s(5203),tS=s(5273),tA=s(2152);function tk(e){let{callData:t,onEndCall:s,onToggleMute:r,onToggleVideo:n,contacts:i,localStream:c,remoteStream:o}=e,[d,u]=(0,l.useState)(!1),[h,x]=(0,l.useState)(!1),[p,f]=(0,l.useState)(!0),[g,v]=(0,l.useState)(0),j=(0,l.useRef)(null),N=(0,l.useRef)(null),b=i.find(e=>e.id===("moi"===t.from?t.to:t.from))||{nom:"Inconnu",avatar:null};return(0,l.useEffect)(()=>{j.current&&c&&(j.current.srcObject=c),N.current&&o&&(N.current.srcObject=o)},[c,o]),(0,l.useEffect)(()=>{let e=setInterval(()=>{v(e=>e+1)},1e3);return()=>clearInterval(e)},[]),(0,a.jsxs)(y.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 bg-black flex flex-col",children:[(0,a.jsxs)("div",{className:"flex-1 relative",children:["video"===t.type&&o?(0,a.jsx)("video",{ref:N,autoPlay:!0,playsInline:!0,className:"w-full h-full object-cover"}):(0,a.jsx)("div",{className:"w-full h-full flex items-center justify-center bg-[#1f2c34]",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"w-32 h-32 rounded-full bg-[#00a884] mx-auto mb-4 flex items-center justify-center",children:b.avatar?(0,a.jsx)("img",{src:b.avatar||"/placeholder.svg",alt:b.nom,className:"w-full h-full rounded-full object-cover"}):(0,a.jsx)("span",{className:"text-5xl text-white",children:b.nom.charAt(0)})}),(0,a.jsx)("h3",{className:"text-2xl font-medium text-white mb-2",children:b.nom}),(0,a.jsx)("p",{className:"text-gray-300",children:(e=>{let t=Math.floor(e/60);return"".concat(t.toString().padStart(2,"0"),":").concat((e%60).toString().padStart(2,"0"))})(g)})]})}),"video"===t.type&&!h&&(0,a.jsx)("div",{className:"absolute top-4 right-4 w-32 h-48 rounded-lg overflow-hidden border-2 border-white shadow-lg",children:(0,a.jsx)("video",{ref:j,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover"})})]}),(0,a.jsxs)("div",{className:"bg-[#1f2c34] p-6 flex justify-center space-x-6",children:[(0,a.jsx)(m,{onClick:()=>{u(r())},className:"w-14 h-14 rounded-full ".concat(d?"bg-red-600 hover:bg-red-700":"bg-gray-700 hover:bg-gray-600"," flex items-center justify-center"),children:d?(0,a.jsx)(tw.A,{className:"w-6 h-6"}):(0,a.jsx)(eI.A,{className:"w-6 h-6"})}),"video"===t.type&&(0,a.jsx)(m,{onClick:()=>{x(n())},className:"w-14 h-14 rounded-full ".concat(h?"bg-red-600 hover:bg-red-700":"bg-gray-700 hover:bg-gray-600"," flex items-center justify-center"),children:h?(0,a.jsx)(tC.A,{className:"w-6 h-6"}):(0,a.jsx)(eA.A,{className:"w-6 h-6"})}),(0,a.jsx)(m,{onClick:()=>{N.current&&(N.current.muted=p,f(!p))},className:"w-14 h-14 rounded-full ".concat(p?"bg-gray-700 hover:bg-gray-600":"bg-red-600 hover:bg-red-700"," flex items-center justify-center"),children:p?(0,a.jsx)(tS.A,{className:"w-6 h-6"}):(0,a.jsx)(tA.A,{className:"w-6 h-6"})}),(0,a.jsx)(m,{onClick:s,className:"w-14 h-14 rounded-full bg-red-600 hover:bg-red-700 flex items-center justify-center",children:(0,a.jsx)(tb.A,{className:"w-6 h-6"})})]})]})}function tD(e,t){let[s,a]=(0,l.useState)(t);return(0,l.useEffect)(()=>{try{let t=window.localStorage.getItem(e);t&&a(JSON.parse(t))}catch(t){console.error('Error reading localStorage key "'.concat(e,'":'),t)}},[e]),[s,t=>{try{let l=t instanceof Function?t(s):t;a(l),window.localStorage.setItem(e,JSON.stringify(l))}catch(t){console.error('Error setting localStorage key "'.concat(e,'":'),t)}}]}class tI{connect(e){return new Promise((t,s)=>{var a;if(this.isConnecting){s(Error("Connexion d\xe9j\xe0 en cours"));return}if((null===(a=this.ws)||void 0===a?void 0:a.readyState)===WebSocket.OPEN){t();return}this.isConnecting=!0,this.userId=e;try{let a="ws://localhost:3001/ws?userId=".concat(encodeURIComponent(e));console.log("\uD83D\uDD0C Connexion WebSocket:",a),this.ws=new WebSocket(a),this.ws.onopen=()=>{console.log("✅ WebSocket connect\xe9 pour:",e),this.isConnecting=!1,this.reconnectAttempts=0,this.startHeartbeat(),t()},this.ws.onmessage=e=>{try{let t=JSON.parse(e.data);this.handleMessage(t)}catch(e){console.error("❌ Erreur parsing message WebSocket:",e)}},this.ws.onclose=e=>{console.log("\uD83D\uDD34 WebSocket ferm\xe9:",e.code,e.reason),this.isConnecting=!1,this.stopHeartbeat(),!e.wasClean&&this.reconnectAttempts<this.maxReconnectAttempts&&this.scheduleReconnect()},this.ws.onerror=e=>{console.error("❌ Erreur WebSocket:",e),this.isConnecting=!1,s(e)},setTimeout(()=>{if(this.isConnecting){var e;this.isConnecting=!1,null===(e=this.ws)||void 0===e||e.close(),s(Error("Timeout de connexion WebSocket"))}},1e4)}catch(e){this.isConnecting=!1,s(e)}})}disconnect(){this.stopHeartbeat(),this.ws&&(this.ws.close(1e3,"D\xe9connexion volontaire"),this.ws=null),this.userId=null,this.reconnectAttempts=0}sendMessage(e,t,s){if(!this.ws||this.ws.readyState!==WebSocket.OPEN)return console.warn("⚠️ WebSocket non connect\xe9, impossible d'envoyer:",e),!1;try{let a={type:e,data:t,to:s,timestamp:new Date().toISOString()};return this.ws.send(JSON.stringify(a)),console.log("\uD83D\uDCE4 Message envoy\xe9:",e,s?"vers ".concat(s):""),!0}catch(e){return console.error("❌ Erreur envoi message:",e),!1}}sendChatMessage(e,t,s){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"text";return this.sendMessage("chat-message",{content:e,conversationId:t,messageType:a},s)}sendCallOffer(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"voice";return this.sendMessage("call-offer",{offer:e,type:s},t)}sendCallAnswer(e,t,s){let a=!(arguments.length>3)||void 0===arguments[3]||arguments[3];return this.sendMessage("call-answer",{answer:e,callId:s,accepted:a},t)}sendIceCandidate(e,t){return this.sendMessage("ice-candidate",{candidate:e.toJSON()},t)}sendCallEnd(e,t){return this.sendMessage("call-end",{callId:t},e)}sendTyping(e,t){return this.sendMessage("typing",{isTyping:t},e)}sendMessageRead(e,t){return this.sendMessage("message-read",{messageIds:t},e)}onMessage(e,t){this.messageHandlers.set(e,t)}offMessage(e){this.messageHandlers.delete(e)}handleMessage(e){let{type:t,data:s,from:a}=e;console.log("\uD83D\uDCE5 Message re\xe7u:",t,a?"de ".concat(a):"");let l=this.messageHandlers.get(t);l?l({...s,from:a}):console.log("⚠️ Pas de handler pour:",t)}setupEventHandlers(){this.onMessage("ping",()=>{this.sendMessage("pong",{})}),this.onMessage("server-shutdown",e=>{console.log("\uD83D\uDED1 Serveur en cours d'arr\xeat:",e.message)})}startHeartbeat(){this.heartbeatInterval=setInterval(()=>{var e;(null===(e=this.ws)||void 0===e?void 0:e.readyState)===WebSocket.OPEN&&this.sendMessage("ping",{})},3e4)}stopHeartbeat(){this.heartbeatInterval&&(clearInterval(this.heartbeatInterval),this.heartbeatInterval=null)}scheduleReconnect(){this.reconnectAttempts++;let e=this.reconnectDelay*Math.pow(2,this.reconnectAttempts-1);console.log("\uD83D\uDD04 Tentative de reconnexion ".concat(this.reconnectAttempts,"/").concat(this.maxReconnectAttempts," dans ").concat(e,"ms")),setTimeout(()=>{this.userId&&this.connect(this.userId).catch(console.error)},e)}get isConnected(){var e;return(null===(e=this.ws)||void 0===e?void 0:e.readyState)===WebSocket.OPEN}get connectionState(){if(!this.ws)return"disconnected";switch(this.ws.readyState){case WebSocket.CONNECTING:return"connecting";case WebSocket.OPEN:return"connected";case WebSocket.CLOSING:return"closing";case WebSocket.CLOSED:return"disconnected";default:return"unknown"}}constructor(){this.ws=null,this.userId=null,this.reconnectAttempts=0,this.maxReconnectAttempts=5,this.reconnectDelay=1e3,this.messageHandlers=new Map,this.isConnecting=!1,this.heartbeatInterval=null,this.setupEventHandlers()}}let tP=new tI;class tT{on(e,t){this.eventHandlers.has(e)||this.eventHandlers.set(e,[]),this.eventHandlers.get(e).push(t)}off(e,t){if(this.eventHandlers.has(e)){if(t){let s=this.eventHandlers.get(e),a=s.indexOf(t);a>-1&&s.splice(a,1)}else this.eventHandlers.set(e,[])}}emit(e,t){let s=this.eventHandlers.get(e);s&&s.forEach(s=>{try{s(t)}catch(t){console.error("Erreur dans le handler ".concat(e,":"),t)}})}setupWebSocketListeners(){tP.onMessage("call-offer",e=>{console.log("\uD83D\uDCDE Offre d'appel re\xe7ue:",e),this.handleCallOffer(e)}),tP.onMessage("call-answer",e=>{console.log("✅ R\xe9ponse d'appel re\xe7ue:",e),this.handleCallAnswer(e)}),tP.onMessage("ice-candidate",e=>{console.log("\uD83E\uDDCA Candidat ICE re\xe7u:",e),this.handleIceCandidate(e)}),tP.onMessage("call-end",e=>{console.log("\uD83D\uDCF4 Fin d'appel re\xe7ue:",e),this.handleCallEnd(e)})}async initiateCall(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"voice";try{if(!tP.isConnected)throw Error("WebSocket non connect\xe9");let s="call_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9));this.currentCallId=s,this.isInitiator=!0,console.log("\uD83D\uDCDE Initiation appel ".concat(t," vers ").concat(e)),this.localStream=await navigator.mediaDevices.getUserMedia({video:"video"===t,audio:!0}),console.log("\uD83C\uDFA5 Stream local obtenu:",this.localStream.getTracks().map(e=>e.kind)),await this.createPeerConnection(),this.localStream.getTracks().forEach(e=>{this.peerConnection&&this.localStream&&(console.log("➕ Ajout track:",e.kind),this.peerConnection.addTrack(e,this.localStream))});let a=await this.peerConnection.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:"video"===t});if(await this.peerConnection.setLocalDescription(a),console.log("\uD83D\uDCE4 Envoi offre d'appel"),!tP.sendCallOffer(a,e,t))throw Error("Impossible d'envoyer l'offre d'appel");return this.emit("call-initiated",{callId:s,targetUserId:e,callType:t}),s}catch(e){throw console.error("❌ Erreur lors de l'initiation de l'appel:",e),this.cleanup(),e}}async acceptCall(e){try{console.log("✅ Acceptation de l'appel:",e.callId),this.currentCallId=e.callId,this.isInitiator=!1,this.localStream=await navigator.mediaDevices.getUserMedia({video:"video"===e.type,audio:!0}),console.log("\uD83C\uDFA5 Stream local obtenu pour r\xe9ponse:",this.localStream.getTracks().map(e=>e.kind)),await this.createPeerConnection(),this.localStream.getTracks().forEach(e=>{this.peerConnection&&this.localStream&&(console.log("➕ Ajout track pour r\xe9ponse:",e.kind),this.peerConnection.addTrack(e,this.localStream))}),e.offer&&(await this.peerConnection.setRemoteDescription(e.offer),console.log("\uD83D\uDCE5 Description distante d\xe9finie"));let t=await this.peerConnection.createAnswer();if(await this.peerConnection.setLocalDescription(t),console.log("\uD83D\uDCE4 Envoi r\xe9ponse d'appel"),!tP.sendCallAnswer(t,e.from,e.callId,!0))throw Error("Impossible d'envoyer la r\xe9ponse d'appel");this.emit("call-accepted",e)}catch(t){throw console.error("❌ Erreur lors de l'acceptation de l'appel:",t),this.rejectCall(e),t}}rejectCall(e){console.log("❌ Rejet de l'appel:",e.callId),tP.sendCallAnswer({},e.from,e.callId,!1),this.cleanup()}endCall(){console.log("\uD83D\uDCF4 Fin d'appel"),this.currentCallId&&tP.sendCallEnd("",this.currentCallId),this.cleanup()}async createPeerConnection(){console.log("\uD83D\uDD17 Cr\xe9ation de la connexion peer"),this.peerConnection=new RTCPeerConnection(this.configuration),this.peerConnection.onicecandidate=e=>{e.candidate?(console.log("\uD83E\uDDCA Nouveau candidat ICE:",e.candidate.type),tP.sendIceCandidate(e.candidate,"")):console.log("\uD83E\uDDCA Collecte des candidats ICE termin\xe9e")},this.peerConnection.ontrack=e=>{console.log("\uD83D\uDCFA Stream distant re\xe7u:",e.streams[0].getTracks().map(e=>e.kind)),this.remoteStream=e.streams[0],this.emit("remote-stream",this.remoteStream)},this.peerConnection.onconnectionstatechange=()=>{var e;let t=null===(e=this.peerConnection)||void 0===e?void 0:e.connectionState;console.log("\uD83D\uDD04 \xc9tat de connexion:",t),"connected"===t?this.emit("call-connected"):("disconnected"===t||"failed"===t)&&this.emit("call-disconnected")},this.peerConnection.oniceconnectionstatechange=()=>{var e;console.log("\uD83E\uDDCA \xc9tat ICE:",null===(e=this.peerConnection)||void 0===e?void 0:e.iceConnectionState)}}async handleCallOffer(e){console.log("\uD83D\uDCDE Traitement offre d'appel:",e);let t={callId:e.callId||"call_".concat(Date.now()),from:e.from,to:"",type:e.type||"voice",offer:e.offer};this.emit("incoming-call",t)}async handleCallAnswer(e){try{if(console.log("✅ Traitement r\xe9ponse d'appel:",e),!e.accepted){console.log("❌ Appel rejet\xe9"),this.emit("call-rejected",e),this.cleanup();return}this.peerConnection&&e.answer&&(await this.peerConnection.setRemoteDescription(e.answer),console.log("\uD83D\uDCE5 Description distante d\xe9finie pour la r\xe9ponse"),this.emit("call-answered",e))}catch(e){console.error("❌ Erreur lors du traitement de la r\xe9ponse:",e),this.emit("call-error",e)}}async handleIceCandidate(e){try{if(this.peerConnection&&e.candidate){let t=new RTCIceCandidate(e.candidate);await this.peerConnection.addIceCandidate(t),console.log("\uD83E\uDDCA Candidat ICE ajout\xe9:",t.type)}}catch(e){console.error("❌ Erreur lors de l'ajout du candidat ICE:",e)}}handleCallEnd(e){console.log("\uD83D\uDCF4 Traitement fin d'appel:",e),this.emit("call-ended",e),this.cleanup()}cleanup(){console.log("\uD83E\uDDF9 Nettoyage des ressources WebRTC"),this.localStream&&(this.localStream.getTracks().forEach(e=>{e.stop(),console.log("⏹️ Track arr\xeat\xe9:",e.kind)}),this.localStream=null),this.peerConnection&&(this.peerConnection.close(),this.peerConnection=null),this.remoteStream=null,this.currentCallId=null,this.isInitiator=!1}toggleMute(){if(this.localStream){let e=this.localStream.getAudioTracks()[0];if(e)return e.enabled=!e.enabled,console.log("\uD83D\uDD07 Audio",e.enabled?"activ\xe9":"d\xe9sactiv\xe9"),!e.enabled}return!1}toggleVideo(){if(this.localStream){let e=this.localStream.getVideoTracks()[0];if(e)return e.enabled=!e.enabled,console.log("\uD83D\uDCF9 Vid\xe9o",e.enabled?"activ\xe9e":"d\xe9sactiv\xe9e"),!e.enabled}return!1}getLocalStream(){return this.localStream}getRemoteStream(){return this.remoteStream}getCurrentCallId(){return this.currentCallId}isInCall(){return null!==this.currentCallId}getConnectionState(){var e;return(null===(e=this.peerConnection)||void 0===e?void 0:e.connectionState)||"disconnected"}constructor(){this.peerConnection=null,this.localStream=null,this.remoteStream=null,this.currentCallId=null,this.isInitiator=!1,this.eventHandlers=new Map,this.configuration={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun1.l.google.com:19302"},{urls:"stun:stun2.l.google.com:19302"}]},this.setupWebSocketListeners()}}let tE=new tT;function tR(e){let{user:t,onLogout:s}=e,[r,n]=tD("whatsapp_contacts",[]),[i,c]=tD("whatsapp_groups",[]),[o,d]=tD("whatsapp_statuses",[]),[m,u]=tD("whatsapp_calls",[]),[h,x]=tD("whatsapp_conversations",{}),[p,f]=tD("whatsapp_user",t),[g,v]=tD("contact_sync_enabled",!1),[j,N]=tD("encryption_keys",null),[b,y]=tD("archived_chats",[]),{syncPhoneContacts:w,requestContactsPermission:C,isLoading:S}=function(){let[e,t]=(0,l.useState)(!1),[s,a]=(0,l.useState)(null);return{syncPhoneContacts:async()=>{t(!0);try{if("contacts"in navigator&&navigator.contacts)try{let e=(await navigator.contacts.select(["name","tel"],{multiple:!0})).map(e=>{var t,s;return{name:(null===(t=e.name)||void 0===t?void 0:t[0])||"Contact sans nom",tel:(null===(s=e.tel)||void 0===s?void 0:s[0])||"+221770000000"}});if(e.length>0)return e}catch(e){console.log("Erreur avec l'API Contacts native:",e)}console.log("Utilisation de contacts simul\xe9s (API native non disponible)"),await new Promise(e=>setTimeout(e,2e3));let e=[{name:"Papa",tel:"+221771234567"},{name:"Maman",tel:"+221772345678"},{name:"Fr\xe8re Ahmed",tel:"+221773456789"},{name:"Sœur Fatou",tel:"+221774567890"},{name:"Ami Omar",tel:"+221775678901"},{name:"Coll\xe8gue Moussa",tel:"+221776789012"},{name:"Voisin Ibrahima",tel:"+221777890123"},{name:"Cousin Abdou",tel:"+221778901234"},{name:"Tante A\xefcha",tel:"+221779012345"},{name:"Oncle Mamadou",tel:"+221770123456"},{name:"Ami Cheikh",tel:"+221771234568"},{name:"Coll\xe8gue Aminata",tel:"+221772345679"},{name:"Voisine Mariam",tel:"+221773456780"},{name:"Cousin Ousmane",tel:"+221774567891"},{name:"Ami Babacar",tel:"+221775678902"},{name:"Coll\xe8gue Khadija",tel:"+221776789013"},{name:"Voisin Alioune",tel:"+221777890124"},{name:"Cousin Modou",tel:"+221778901235"},{name:"Ami Seydou",tel:"+221779012346"},{name:"Coll\xe8gue Ndeye",tel:"+221770123457"}].sort(()=>Math.random()-.5),t=Math.floor(13*Math.random())+8;return e.slice(0,t)}catch(e){return console.error("Erreur lors de la synchronisation des contacts:",e),[{name:"Contact Test 1",tel:"+221771234567"},{name:"Contact Test 2",tel:"+221772345678"},{name:"Contact Test 3",tel:"+221773456789"}]}finally{t(!1)}},requestContactsPermission:async()=>{try{if(!("contacts"in navigator)&&!("ContactsManager"in window)){if(console.warn("L'API Contacts n'est pas support\xe9e sur ce navigateur"),"permissions"in navigator)try{let e=await navigator.permissions.query({name:"contacts"});if("granted"===e.state)return a(!0),!0}catch(e){console.log("Permission contacts non support\xe9e")}return a(!1),!1}try{if("permissions"in navigator){let e=await navigator.permissions.query({name:"contacts"});if("granted"===e.state)return a(!0),!0;if("prompt"===e.state)return a(!0),!0;return console.warn("Permission refus\xe9e pour acc\xe9der aux contacts"),a(!1),!1}}catch(e){console.log("Erreur lors de la v\xe9rification des permissions:",e)}return a(!0),!0}catch(e){return console.error("Erreur lors de la demande de permission:",e),a(!1),!1}},importContactsFromFile:async e=>new Promise((t,s)=>{let a=new FileReader;a.onload=a=>{try{var l;let s=null===(l=a.target)||void 0===l?void 0:l.result,r=[];e.name.endsWith(".vcf")?s.split("BEGIN:VCARD").forEach(e=>{if(e.trim()){let t=e.split("\n"),s="",a="";t.forEach(e=>{e.startsWith("FN:")?s=e.substring(3).trim():e.startsWith("TEL:")&&(a=e.substring(4).trim())}),s&&a&&r.push({name:s,tel:a})}}):e.name.endsWith(".csv")&&s.split("\n").forEach((e,t)=>{if(0===t)return;let[s,a]=e.split(",").map(e=>e.trim().replace(/"/g,""));s&&a&&r.push({name:s,tel:a})}),t(r)}catch(e){s(e)}},a.onerror=()=>s(Error("Erreur lors de la lecture du fichier")),a.readAsText(e)}),isLoading:e,hasPermission:s}}(),{requestNotificationPermission:A,sendNotification:k}=function(){let[e,t]=(0,l.useState)("default"),s=(0,l.useRef)(!1);return(0,l.useEffect)(()=>{s.current||("Notification"in window&&t(Notification.permission),s.current=!0)},[]),{permission:e,requestNotificationPermission:(0,l.useCallback)(async()=>{if(!("Notification"in window))return console.warn("Ce navigateur ne supporte pas les notifications"),!1;if("granted"===Notification.permission)return!0;if("denied"===Notification.permission)return console.warn("Permission de notification refus\xe9e"),!1;try{let e=await Notification.requestPermission();return t(e),"granted"===e}catch(e){return console.error("Erreur lors de la demande de permission:",e),!1}},[]),sendNotification:(0,l.useCallback)((e,t,s)=>{if(!("Notification"in window))return console.warn("Notifications non support\xe9es"),null;if("granted"!==Notification.permission)return console.warn("Permission de notification non accord\xe9e"),null;try{let a=new Notification(e,{body:t,icon:"/favicon.ico",badge:"/favicon.ico",tag:"whatsapp-message",requireInteraction:!1,...s});return setTimeout(()=>{a.close()},5e3),a}catch(e){return console.error("Erreur lors de l'envoi de la notification:",e),null}},[])}}(),{generateKeys:D,encryptMessage:I,decryptMessage:P}=function(){let e=(0,l.useCallback)(()=>({publicKey:btoa(Math.random().toString(36).substring(7)),privateKey:btoa(Math.random().toString(36).substring(7))}),[]);return{generateKeys:e,encryptMessage:(0,l.useCallback)((e,t)=>{try{return btoa(e+":"+t)}catch(t){return console.error("Erreur de chiffrement:",t),e}},[]),decryptMessage:(0,l.useCallback)((e,t)=>{try{return atob(e).split(":")[0]}catch(t){return console.error("Erreur de d\xe9chiffrement:",t),e}},[])}}(),{isConnected:T,onlineUsers:E,incomingCall:R,currentCall:M,sendMessage:z,initiateCall:F,acceptCall:_,rejectCall:L,endCall:O,webrtcClient:W}=function(e){let[t,s]=(0,l.useState)(!1),[a,r]=(0,l.useState)(null),[n,i]=(0,l.useState)([]),[c,o]=(0,l.useState)([]),[d,m]=(0,l.useState)(null),[u,h]=(0,l.useState)(null),[x,p]=(0,l.useState)([]),f=(0,l.useCallback)(async()=>{if(e)try{r(null),await tP.connect(e),s(!0),console.log("✅ Connect\xe9 au WebSocket")}catch(e){console.error("❌ Erreur connexion WebSocket:",e),r(e instanceof Error?e.message:"Erreur de connexion"),s(!1)}},[e]),g=(0,l.useCallback)(()=>{tP.disconnect(),s(!1),i([]),o([]),p([])},[]),v=(0,l.useCallback)(function(t,s,a){let l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"text";if(!tP.isConnected)return console.warn("⚠️ WebSocket non connect\xe9"),!1;let r={id:"msg_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),content:t,senderId:e,conversationId:s,timestamp:new Date().toISOString(),type:l,status:"sent"};return i(e=>[...e,r]),tP.sendChatMessage(t,s,a,l)},[e]),j=(0,l.useCallback)((e,t)=>tP.sendTyping(e,t),[]),N=(0,l.useCallback)((e,t)=>tP.sendMessageRead(t,e),[]),b=(0,l.useCallback)(async function(t){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"voice";try{let a=await tE.initiateCall(t,s);return h({callId:a,from:e,to:t,type:s,status:"ringing",startTime:new Date().toISOString()}),a}catch(e){throw console.error("❌ Erreur initiation appel:",e),e}},[e]),y=(0,l.useCallback)(async t=>{try{await tE.acceptCall(t),m(null),h({callId:t.callId,from:t.from,to:e,type:t.type,status:"active",startTime:new Date().toISOString()})}catch(e){throw console.error("❌ Erreur acceptation appel:",e),e}},[e]),w=(0,l.useCallback)(e=>{tE.rejectCall(e),m(null)},[]),C=(0,l.useCallback)(()=>{tE.endCall(),h(e=>e?{...e,status:"ended",endTime:new Date().toISOString()}:null)},[]);return(0,l.useEffect)(()=>{if(e)return tP.onMessage("chat-message",e=>{console.log("\uD83D\uDCAC Nouveau message re\xe7u:",e);let t={id:e.id||"msg_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),content:e.content,senderId:e.from,conversationId:e.conversationId,timestamp:e.timestamp||new Date().toISOString(),type:e.messageType||"text",status:"delivered"};i(e=>[...e,t])}),tP.onMessage("typing",e=>{console.log("⌨️ Indicateur de frappe:",e),o(t=>{let s=t.filter(t=>t.userId!==e.from);return e.isTyping?[...s,{userId:e.from,isTyping:!0,conversationId:e.conversationId||""}]:s}),e.isTyping&&setTimeout(()=>{o(t=>t.filter(t=>t.userId!==e.from))},3e3)}),tP.onMessage("message-read",e=>{console.log("\uD83D\uDC41️ Messages lus:",e),i(t=>t.map(t=>e.messageIds.includes(t.id)?{...t,status:"read"}:t))}),tP.onMessage("user-online",e=>{console.log("\uD83D\uDFE2 Utilisateur en ligne:",e.userId),p(t=>[...new Set([...t,e.userId])])}),tP.onMessage("user-offline",e=>{console.log("\uD83D\uDD34 Utilisateur hors ligne:",e.userId),p(t=>t.filter(t=>t!==e.userId))}),tP.onMessage("users-list",e=>{console.log("\uD83D\uDC65 Liste des utilisateurs:",e.users),p(e.users||[])}),()=>{tP.offMessage("chat-message"),tP.offMessage("typing"),tP.offMessage("message-read"),tP.offMessage("user-online"),tP.offMessage("user-offline"),tP.offMessage("users-list")}},[e]),(0,l.useEffect)(()=>(tE.on("incoming-call",e=>{console.log("\uD83D\uDCDE Appel entrant:",e),m(e)}),tE.on("call-answered",()=>{console.log("✅ Appel accept\xe9"),h(e=>e?{...e,status:"active"}:null)}),tE.on("call-rejected",()=>{console.log("❌ Appel rejet\xe9"),h(null)}),tE.on("call-ended",()=>{console.log("\uD83D\uDCF4 Appel termin\xe9"),h(e=>e?{...e,status:"ended",endTime:new Date().toISOString()}:null),m(null)}),tE.on("call-connected",()=>{console.log("\uD83D\uDD17 Appel connect\xe9"),h(e=>e?{...e,status:"active"}:null)}),()=>{tE.off("incoming-call"),tE.off("call-answered"),tE.off("call-rejected"),tE.off("call-ended"),tE.off("call-connected")}),[]),(0,l.useEffect)(()=>(e&&!t&&f(),()=>{t&&g()}),[e,t,f,g]),{isConnected:t,connectionError:a,onlineUsers:x,messages:n,sendMessage:v,typingUsers:c,sendTyping:j,markAsRead:N,incomingCall:d,currentCall:u,initiateCall:b,acceptCall:y,rejectCall:w,endCall:C,connect:f,disconnect:g,webrtcClient:tE}}(null==p?void 0:p.id),[V,H]=(0,l.useState)(null),[B,q]=(0,l.useState)(null),[G,J]=(0,l.useState)("chats"),[K,X]=(0,l.useState)(null),[Y,Q]=(0,l.useState)(!1),[$,ee]=(0,l.useState)(!1),et=(0,l.useRef)(!1),es=(0,l.useRef)(!1);(0,l.useEffect)(()=>{!es.current&&!j&&(N(D()),es.current=!0)},[j,D,N]),(0,l.useEffect)(()=>{!et.current&&(async()=>{try{await A(),g&&await C()}catch(e){console.error("Erreur lors de l'initialisation des permissions:",e)}finally{et.current=!0}})()},[]),(0,l.useEffect)(()=>(tP.onMessage("chat-message",e=>{let{from:t,content:s,type:a="text"}=e,l="conv_".concat(p.id,"_").concat(t);x(r=>{let n={...r};n[l]||(n[l]=[]);let i={id:"msg_".concat(Date.now()),expediteur:t,contenu:s,type:a||"text",heure:new Date().toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"}),statut:"delivered",timestamp:new Date().toISOString(),encrypted:e.encrypted||!1};return n[l]=[...n[l],i],n});let n=r.find(e=>e.id===t);n&&!document.hasFocus()&&k("Nouveau message de ".concat(n.nom),s),(null==V?void 0:V.id)===t&&tP.sendMessageRead(t,[e.id])}),()=>{tP.offMessage("chat-message")}),[r,V,null==p?void 0:p.id,k,x]),(0,l.useEffect)(()=>{0!==E.length&&n(e=>e.map(e=>({...e,isOnline:E.includes(e.id)})))},[E,n]);let ea=e=>{H(e),q(null)},el=e=>{q(e),H(null)},er=async e=>{let t=V?V.id:null==B?void 0:B.id;if(!t||!j)return;let s=V?"conv_".concat(p.id,"_").concat(t):"group_".concat(t),a=I(e.content||e.contenu,j.publicKey),l={id:"msg_".concat(Date.now()),expediteur:"moi",contenu:e.content||e.contenu,encryptedContent:a,type:e.type,heure:new Date().toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"}),statut:"sending",timestamp:new Date().toISOString(),replyTo:e.replyTo?K:null,viewOnce:e.viewOnce||!1,disappearAt:e.disappearAt||null,mentions:e.mentions||[],reactions:[],starred:!1,edited:!1,encrypted:!0};x(e=>{let t={...e};return t[s]||(t[s]=[]),t[s]=[...t[s],l],t}),V&&T&&z(l.contenu,s,V.id,l.type)&&setTimeout(()=>{x(e=>{let t={...e};return t[s]&&(t[s]=t[s].map(e=>e.id===l.id?{...e,statut:"sent"}:e)),t})},100),X(null)},en=async(e,t)=>{try{await F(e,t)}catch(e){console.error("Erreur lors de l'appel:",e)}},ei=(e,t)=>{y(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},ec=(e,t)=>{let s="contact"===t?"conv_".concat(p.id,"_").concat(e):"group_".concat(e);x(e=>{let t={...e};return delete t[s],t}),y(t=>t.filter(t=>t!==e)),((null==V?void 0:V.id)===e||(null==B?void 0:B.id)===e)&&(H(null),q(null))},eo=async()=>{try{let e=(await w()).map(e=>({id:"contact_".concat(Date.now(),"_").concat(Math.random()),nom:e.name,telephone:e.tel,avatar:null,isOnline:!1,lastSeen:new Date().toISOString(),description:"Salut ! J'utilise WhatsApp.",isBlocked:!1,isFavorite:!1,isWhatsAppUser:Math.random()>.3,syncedFromPhone:!0}));n(t=>[...t,...e]),v(!0),Q(!1)}catch(e){console.error("Erreur lors de la synchronisation:",e)}},ed=e=>{X(e)},em=e=>{console.log("Forward message:",e)},eu=e=>{let t=V?V.id:null==B?void 0:B.id;if(!t)return;let s=V?"conv_".concat(p.id,"_").concat(t):"group_".concat(t);x(t=>{let a={...t};return a[s]&&(a[s]=a[s].map(t=>t.id===e.id?{...t,starred:!t.starred}:t)),a})},eh=(e,t)=>{let s=V?V.id:null==B?void 0:B.id;if(!s)return;let a=V?"conv_".concat(p.id,"_").concat(s):"group_".concat(s);x(s=>{let l={...s};return l[a]&&(l[a]=l[a].map(s=>{if(s.id===e.id){let e=s.reactions||[],a=e.find(e=>e.emoji===t);return a?a.count+=1:e.push({emoji:t,count:1,users:[p.id]}),{...s,reactions:e}}return s})),l})},ex=e=>{let t={id:"contact_".concat(Date.now()),nom:e.nom,telephone:e.telephone,avatar:null,isOnline:!1,lastSeen:new Date().toISOString(),description:"Salut ! J'utilise WhatsApp.",isBlocked:!1,isFavorite:!1,isWhatsAppUser:!0,syncedFromPhone:!1};return n(e=>[...e,t]),t},ep=e=>{f({...p,...e})},ef=()=>(0,a.jsx)("div",{className:"flex-1 bg-[#0b141a] flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center max-w-md",children:[(0,a.jsx)("div",{className:"w-32 h-32 mx-auto mb-6 bg-[#00a884] rounded-full flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-16 h-16 text-white",fill:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})})}),(0,a.jsx)("h3",{className:"text-xl font-light text-gray-300 mb-2",children:"Communaut\xe9s"}),(0,a.jsx)("p",{className:"text-gray-400 mb-4",children:"Organisez vos groupes autour de sujets communs et restez connect\xe9 avec votre communaut\xe9."}),(0,a.jsx)("button",{className:"px-6 py-2 bg-[#00a884] hover:bg-[#008069] text-white rounded-md transition-colors",children:"Cr\xe9er une communaut\xe9"})]})}),eg=()=>(0,a.jsx)("div",{className:"flex-1 bg-[#0b141a] flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center max-w-md",children:[(0,a.jsx)("div",{className:"w-32 h-32 mx-auto mb-6 bg-[#25d366] rounded-full flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-16 h-16 text-white",fill:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{d:"M20 6h-2.18c.11-.31.18-.65.18-1a2.996 2.996 0 0 0-5.5-1.65l-.5.67-.5-.68C10.96 2.54 10.05 2 9 2 7.34 2 6 3.34 6 5c0 .35.07.69.18 1H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-5-2c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM9 4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1z"})})}),(0,a.jsx)("h3",{className:"text-xl font-light text-gray-300 mb-2",children:"WhatsApp Business"}),(0,a.jsx)("p",{className:"text-gray-400 mb-4",children:"Cr\xe9ez un profil professionnel, ajoutez un catalogue et connectez-vous avec vos clients."}),(0,a.jsx)("button",{className:"px-6 py-2 bg-[#25d366] hover:bg-[#128c7e] text-white rounded-md transition-colors",children:"Configurer Business"})]})}),ev=()=>(0,a.jsx)("div",{className:"flex-1 bg-[#0b141a] flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h3",{className:"text-xl font-light text-gray-300 mb-2",children:"Discussions archiv\xe9es"}),(0,a.jsx)("p",{className:"text-gray-400",children:"Aucune discussion archiv\xe9e"})]})}),ej=()=>(0,a.jsx)("div",{className:"flex-1 bg-[#0b141a] flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h3",{className:"text-xl font-light text-gray-300 mb-2",children:"Messages favoris"}),(0,a.jsx)("p",{className:"text-gray-400",children:"Aucun message favori"})]})});return(0,a.jsx)("div",{className:"flex h-screen bg-[#111b21]",children:(0,a.jsxs)("div",{className:"flex w-full max-w-7xl mx-auto bg-[#111b21] shadow-xl",children:[(0,a.jsx)(U,{currentSection:G,onSectionChange:J,user:p,onLogout:s,isConnected:T}),(()=>{if(Y)return(0,a.jsx)(tv,{onSync:eo,onCancel:()=>Q(!1),isLoading:S});if($)return(0,a.jsx)(tN,{onClose:()=>ee(!1)});switch(G){case"status":return(0,a.jsx)(e0,{user:p,statuses:o,setStatuses:d,contacts:r});case"calls":return(0,a.jsx)(e5,{user:p,contacts:r,calls:m,setCalls:u});case"groups":return(0,a.jsx)(e1,{user:p,groups:i,setGroups:c,contacts:r,onSelectGroup:el,conversations:h});case"communities":return(0,a.jsx)(ef,{});case"business":return(0,a.jsx)(eg,{});case"archived":return(0,a.jsx)(ev,{});case"starred":return(0,a.jsx)(ej,{});case"settings":return(0,a.jsx)(tg,{user:p,onUpdateUser:ep,onLogout:s});default:return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eN,{user:p,contacts:r,conversations:h,groups:i,selectedContact:V,selectedGroup:B,onSelectContact:ea,onSelectGroup:el,currentSection:G,onRefresh:()=>{},onAddContact:ex,onSyncContacts:()=>Q(!0),onShowQRCode:()=>ee(!0),onArchiveChat:ei,onDeleteChat:ec,archivedChats:b}),(0,a.jsx)(eX,{selectedContact:V,selectedGroup:B,conversations:h,onSendMessage:er,onReply:ed,onForward:em,onStar:eu,onReact:eh,onBack:()=>{H(null),q(null)},user:p,replyTo:K,onCancelReply:()=>X(null),contacts:r,encryptionKeys:j,onCall:en,isConnected:T})]})}})(),(0,a.jsx)(Z.N,{children:R&&(0,a.jsx)(ty,{callData:R,onAccept:()=>_(R),onReject:()=>L(R),contacts:r})}),(0,a.jsx)(Z.N,{children:M&&"active"===M.status&&(0,a.jsx)(tk,{callData:M,onEndCall:O,onToggleMute:()=>W.toggleMute(),onToggleVideo:()=>W.toggleVideo(),contacts:r,localStream:W.getLocalStream(),remoteStream:W.getRemoteStream()})})]})})}function tM(){let[e,t]=(0,l.useState)(null),[s,r]=(0,l.useState)(!0);return((0,l.useEffect)(()=>{let e=localStorage.getItem("currentUser");e&&t(JSON.parse(e)),r(!1)},[]),s)?(0,a.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-[#111b21]",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(y.P.div,{initial:{scale:0},animate:{scale:1,rotate:360},transition:{duration:.5},className:"w-16 h-16 border-4 border-[#00a884] border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,a.jsx)(y.P.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},className:"text-gray-400",children:"Chargement..."})]})}):(0,a.jsx)("div",{className:"min-h-screen bg-[#111b21]",children:e?(0,a.jsx)(tR,{user:e,onLogout:()=>{t(null),localStorage.removeItem("currentUser")}}):(0,a.jsx)(k,{onLogin:e=>{t(e),localStorage.setItem("currentUser",JSON.stringify(e))}})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[777,441,684,358],()=>t(1038)),_N_E=e.O()}]);